<html>
<head>
<meta content="text/html; charset=iso-8859-15" http-equiv="Content-Type">
<link title="new" rel="stylesheet" href="http://www.gentoo.org/main-new.css" type="text/css">
<link REL="shortcut icon" HREF="http://www.gentoo.org/favicon.ico" TYPE="image/x-icon">
<title>Gentoo Linux 
	
		Dokumentation
	
-- 
	Anleitung zur Gentoo Linux 1.2 Installation</title>
</head>
<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"><table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td valign="top" height="125" bgcolor="#45347b"><table cellspacing="0" cellpadding="0" border="0" width="193">
<tr><td class="logobg" valign="top" align="center" height="88"><a href="/index.html"><img border="0" src="http://www.ibiblio.org/gentoo/images/gtop-s.jpg"></a></td></tr>
<tr><td class="logobg" valign="top" align="center" height="36"><a href="/index.html"><img border="0" src="http://www.ibiblio.org/gentoo/images/gbot-s.gif"></a></td></tr>
</table></td></tr>
<tr><td valign="top" align="right" bgcolor="#ffffff"><table border="0" cellspacing="0" cellpadding="0" width="100%"><tr>
<td width="99%" class="content" valign="top" align="left">
<br><p class="dochead">Anleitung zur Gentoo Linux 1.2 Installation</p>
<form>
<b>Inhalt</b>:
	<select name="url" size="1" OnChange="location.href=form.url.options[form.url.selectedIndex].value" style="font-family:Arial,Helvetica, sans-serif; font-size:10"><option value="#doc_chap1">1. Über die Installation</option>
<option value="#doc_chap2">2. Booten</option>
<option value="#doc_chap3">3. Laden der Kernel Module</option>
<option value="#doc_chap4">4. PCMCIA Kernel Module laden</option>
<option value="#doc_chap5">5. Konfiguration der Netzwerkanbindung</option>
<option value="#doc_chap6">6. Einrichten der Partitionen</option>
<option value="#doc_chap7">7. Partitionen mounten</option>
<option value="#doc_chap8">8. Die CD-ROM mounten</option>
<option value="#doc_chap9">9. Entpacken des gewünschten stage*.tbz2 Archivs</option>
<option value="#doc_chap10">10. Rsync</option>
<option value="#doc_chap11">11. Von &quot;stage1&quot; zu &quot;stage2&quot;</option>
<option value="#doc_chap12">12. Von &quot;stage2&quot; zu &quot;stage3&quot;</option>
<option value="#doc_chap13">13. Letzte Schritte: Zeitzone</option>
<option value="#doc_chap14">14. Letze Schritte: Kernel und System Logger</option>
<option value="#doc_chap15">15. Letzte Schritte: Zusätzlich Pakete installieren</option>
<option value="#doc_chap16">16. Letzte Schritte: /etc/fstab</option>
<option value="#doc_chap17">17. Installation abgeschlossen!</option></select>
</form>
<p class="chaphead">
<font class="chapnum"><a name="doc_chap1">1.</a></font>Über die Installation</p>

<p>Die neue Boot CD startet von fast jedem modernen IDE CD-ROM Laufwerk, sowie von vielen 
SCSI CD-ROMs. Die CD-ROM unterstützt IDE Controller (eingebaut im Kernel) sowie alle 
SCSI Geräte (vorhanden als Module). Zusätzlich stellt sie Module für
buchstäblich jede Netzwerkkarte zur Verfügung die Linux unterstützt, 
sowie Tools die es ermöglichen das Netzwerk zu konfigurieren und ausgehende 
<font class="code">ssh</font> Verbindungen zum Dateidownload aufzubauen.</p>

<p> Um von der &quot;Build&quot; CD zu installieren, wird ein 486+ Prozessor benötigt und 
idealerweise mindestens 64 Megabyte RAM. (Gentoo Linux konnte erfolgreich mit 
64 MB RAM +  64 MB Swap installiert werden, aber die Installation unter diesen Bedingungen 
war extrem langsam.) Um die Installation zu starten, laden Sie zuerst eines unserer 
CD ISO Images von <a href="http://www.ibiblio.org/gentoo/releases/build/">http://www.ibiblio.org/gentoo/releases/build/</a>. Im Augenblick 
haben wir zwei CDs verfügbar. Unsere erste CD ist 
<a href="http://www.ibiblio.org/gentoo/releases/build/1.2/gentoo-ix86-1.2.iso">
gentoo-ix86-1.2.iso</a>. Dieses Image ist recht klein (16Mb) und enthält ein minimales 
&quot;chrootfähiges&quot; 

Image (<font class="path">stage1-ix86-1.2.tbz2</font>) -- alles was Sie benötigen um ein
Gentoo Linux System von Grund auf aufzubauen (Die Quelldateien werden dabei 
automatisch aus dem Internet geladen). Unsere zweite CD ist 
<a href="http://www.ibiblio.org/gentoo/releases/build/1.2/gentoo-i686-1.2.iso">
gentoo-i686-1.2.iso</a>. Dieses Image ist etwas größer (100+Mb) -- Es
enthält das gleiche Material wie auf unserem 16Mb Image, <font class="emphasis">plus</font> einem 
vorkompiliertem i686 Basissystem (<font class="path">stage3-i686-1.2.tbz2</font>) 
sowie ein teilweise kompiliertes 
i686 Basissystem (<font class="path">stage2-i686-1.2.tbz2</font>) in TAR-Archiven.
Die beiden neuen TAR-Archive benötigen einen Pentium Pro oder besser (auf einem K6-System und
niedriger nicht einsetzbar). 
Wenn Sie ein i686+ System verwenden und nicht alles von Grund auf neu kompilieren wollen,
können Sie damit die Installationsdauer von Gentoo Linux deutlich verkzüen.
</p>

<p>Jetzt lassen Sie uns kurz den den Installationsprozess skizzieren. Sie erstellen die Partitionen,
erzeugen die Dateisysteme und entpacken entweder das <font class="emphasis">stage1</font>, <font class="emphasis">stage2</font> oder <font class="emphasis">stage3</font> 
Archiv. Wenn Sie das <font class="emphasis">stage1</font> oder <font class="emphasis">stage2</font> Archiv verwenden, müssen Sie alle nötigen Schritte
unternehmen, um Ihr System auf den Stand des <font class="emphasis">stage3</font> Archivs 
zu bringen. Wenn Sie <font class="emphasis">stage3</font> erreicht haben, können Sie das System konfigurieren (die Konfigurationsdateien anpassen, einen Bootloader 
installieren, usw.) und in ein voll funktionsfähiges Gentoo Linux booten.
Abhängig von der gewählten Installationsstufe, von der Sie starten, 
hier die benötigten Schritte:
</p>


<table class="ntable">
<tr>
<td bgcolor="#7a5ada" class="infohead"><b>stage Archiv</b></td>
<td bgcolor="#7a5ada" class="infohead"><b>Installationsanforderungen</b></td>
</tr>
<tr>
<td bgcolor="#ddddff" class="tableinfo">1</td>
<td bgcolor="#ddddff" class="tableinfo">Einrichten von Partition und Dateisystem, emerge rsync, bootstrap, emerge system, emerge linux sources, abschliessende Konfiguration</td>
</tr>
<tr>
<td bgcolor="#ddddff" class="tableinfo">2</td>
<td bgcolor="#ddddff" class="tableinfo">Einrichten von Partition und Dateisystem, emerge rsync, emerge system, emerge linux sources, abschliessende Konfiguration</td>
</tr>
<tr>
<td bgcolor="#ddddff" class="tableinfo">3</td>
<td bgcolor="#ddddff" class="tableinfo">Einrichten von Partition und Dateisystem, emerge rsync (optional), abschliessende Konfiguration</td>
</tr>
</table>

<p class="chaphead">
<font class="chapnum"><a name="doc_chap2">2.</a></font>Booten</p>

<p>Wenn Sie sich für eine CD entschieden haben, booten Sie damit. Sie werden von
einem Haufen Text und einem <font class="code">boot:</font> Prompt am unteren Bildschirmrand 
begrüßt. Drücken Sie an diesem Prompt <font class="emphasis">Enter</font> und Linux wird von der CD
geladen.</p>


<p>Als nächstes werden Sie mit einer kleinen Liste von verfügbaren Befehlen auf der 
Boot-CD begrüßt. Dies beinhaltet <font class="code">nano</font> (einen Klon des Editors <font class="code">pico</font>) und
die Anleitung zur Netzwerkkonfiguration. Danach werden Sie nach Ihrem bevorzugtem
Keyboard Layout befragt, gefolgt von der automatischen Erkennung der PCI Geräte. Während
der Geräteerkennung werden alle passenden Kernelmodule für PCI SCSI Controller und
Netzwerkkarten geladen. Wenn Sie danach <font class="emphasis">Enter</font> drücken, kommen Sie in eine
minimale Linux Umgebung. Sie sollten nun ein root Prompt (&quot;<font class="code">#</font>&quot;) auf der
aktuellen Konsole haben. Durch drücken von Alt-F2, Alt-F3 usw.., gefolgt von
einem <font class="emphasis">Enter</font>  können Sie weitere Konsolen aktivieren.</p>


<p class="chaphead">
<font class="chapnum"><a name="doc_chap3">3.</a></font>Laden der Kernel Module</p>

<p>Sie sind jetzt fast soweit, dass Sie mit der Installation anfangen können. 
Sie müssen aber noch dafür sorgen, dass der Kernel auch die Netzwerkkarte 
erkennt. Eventuell müssen auch noch SCSI Module geladen werden die nicht
automatisch erkannt wurden. Um eine Liste aller verfügbaren Netzwerkkartenmodule
anzuzeigen, geben Sie <font class="code">ls /lib/modules/*/kernel/drivers/net/*</font> ein.
Um ein bestimmtes Modul zu laden, tippen Sie: </p>

<a name="doc_pre1"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 1</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
# <font class="input">modprobe pcnet32</font>
	<font class="comment">(Ersetzen Sie pcnet32 durch das Modul Ihrer NIC)</font>
</pre></td></tr>
</table>

<p>Wenn Sie nun auch noch auf SCSI Hardware zugreifen möchten, die nicht automatisch
erkannt wurde, müssen Sie das passende Modul aus /lib/modules laden. 
Verwenden Sie dazu <font class="code">modprobe</font>:</p>


<a name="doc_pre2"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 2</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
# <font class="input">modprobe aic7xxx</font>
# <font class="input">modprobe sr_mod</font>
# <font class="input">modprobe sd_mod</font>
</pre></td></tr>
</table>

<p>Mit den oben stehenden Befehlen haben Sie den SCSI Treiber <font class="code">aic7xxx</font> geladen und
sichergestellt, das die Unterstützung für SCSI CD-ROMS (<font class="code">sr_mod</font>) und Festplatten 
(<font class="code">sd_mod</font>) aktiviert ist.</p>

<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#bbffbb"><p class="note">
<b>Anmerkung: </b>Version -r10 des ISO Images enthält jetzt auch <font class="code">hdparm</font>. Wenn eine Ihrer Festplatten
optimiert werden muss, ist nun der richtige Zeitpunkt dafür. Auf einigermaßen moderner Hardware,
sollte der Befehl <font class="code">hdparm -d 1 /dev/hdx</font> problemlos anzuwenden sein. Mit dem Befehl
<font class="code">hdparm -v /dev/hdx</font>, können Sie die aktuellen Einstellungen Ihrer Festplatte prüfen.
Und mit <font class="code">hdparm -t /dev/hdx</font>, testen Sie die Performance Ihrer Festplatte.</p></td></tr></table>
<p class="chaphead">
<font class="chapnum"><a name="doc_chap4">4.</a></font>PCMCIA Kernel Module laden</p>
<p>Wenn Sie eine PCMCIA Netzwerkkarte verwenden, müssen Sie noch einen
zusätzlichen Dreh anwenden.</p> 
<a name="doc_pre3"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 3</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
# <font class="input">insmod pcmcia_core</font>
# <font class="input">insmod i82365</font>
# <font class="input">insmod ds</font>
# <font class="input">cardmgr -f</font>
</pre></td></tr>
</table>

<p>Während cardmgr überprüft, welche Hardware vorhanden ist, sollten aus Ihrem
Lautsprecher einige Piepser ertönen und die PCMCIA Netzwerkkarte ihre Arbeit
aufnehmen. Sie können natürlich die PCMCIA Karte auch nach dem Laden des cardmgr
einstecken (Technisch gesehen müssen Sie <font class="input">cardmgr</font> nicht starten wenn Sie
genau wissen welche Module Ihre PCMCIA Karte benötigt. Aber wenn nicht, versuchen
Sie nicht alle Module zu laden um zu sehen, welches passt. Das wird nicht
funktionieren, da sich alle Module laden lassen und darauf warten, das eine
passende PCMCIA Karte eingesteckt wird. Außerdem entfernt <font class="code">cardmgr</font> die
Module der Karte wieder, wenn sie entnommen wird).
</p>

<p class="chaphead">
<font class="chapnum"><a name="doc_chap5">5.</a></font>Konfiguration der Netzwerkanbindung</p>

<p>Die neue -r11+ Boot CD erlaubt es nun ein Netzwerk zu konfigurieren, damit <font class="code">ssh</font>, 
<font class="code">scp</font> oder <font class="code">wget</font> schon vor der eigentlichen Installation verwendet werden können. Auch
wenn Sie diese Programme jetzt nicht brauchen, sollten Sie nun das Netzwerk konfigurieren. Einmal
konfiguriert kann Portage diese Netzwerkverbindung nutzen, wenn Sie sich in der &quot;chroot&quot; Umgebung
befinden (Für die Gentoo Linux Installation erforderlich).</p>

<p class="secthead"><a name="_sect2">DHCP </a></p>
<p>Mit DHCP ist die Netzwerkkonfiguration sehr einfach. Wenn Ihr Provider kein DHCP anbietet,
geht es für Sie bei der statischen Netzwerkkonfiguration weiter.</p>

<a name="doc_pre4"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 4: Netzerk Konfiguration via DHCP</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
# <font class="input">dhcpcd eth0</font> 
</pre></td></tr>
</table>
<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#bbffbb"><p class="note">
<b>Anmerkung: </b>
Einige Provider erwarten, dass Sie einen Hostnamen übergeben. Um dies zu tun, hängen Sie die 
Option <font class="code">-h meinhostname</font> an das oben stehende Kommando.</p></td></tr></table>

<p>Wenn Sie <font class="input">dhcpConfig</font> Warnungen bekommen, keine Panik. Die meisten Meldungen sind 
harmlos. Weiter geht es unten mit dem Test der Netzwerkanbindung.</p>

<p class="secthead"><a name="_sect3">Statische Konfiguration </a></p>
<p>
Sie müssen Ihre Netzwerkanbindung soweit konfigurieren, dass Sie die benötigten Quellen 
herunterladen können. Außerdem wird das lokale (localhost) Interface benötigt. 
Bitte geben Sie dazu folgende Befehle ein und ersetzen $IFACE mit Ihrem Netzwerkinterface 
(typischerweise <font class="code">eth0</font>), $IPNUM mit Ihrer IP Adresse, $BCAST mit Ihrer Broadcast Adresse und 
$NMASK mit Ihrer Netzwerkmaske. Bei dem <font class="code">route</font> Befehl ersetzen Sie $GTWAY durch die IP Adresse 
Ihres &quot;default Gateway&quot;.</p>

<a name="doc_pre5"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 5</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
# <font class="input">/sbin/ifconfig $IFACE $IPNUM broadcast $BCAST netmask $NMASK</font>
# <font class="input">/sbin/route add -net default gw $GTWAY netmask 0.0.0.0 metric 1</font>
</pre></td></tr>
</table>
<p>Jetzt müssen Sie die Datei <font class="path">/etc/resolv.conf</font> erstellen, damit die Namensauflösung 
(Web/FTP Server durch Namen anstatt der IP Adresse finden) funktioniert.</p>

<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#bbffbb"><p class="note">
<b>Anmerkung: </b>Im Moment ist nur <font class="code">nano</font>, ein kleiner, leicht zu bedienender Editor installiert.
Verwenden Sie <font class="code">nano</font> mit der Option <font class="code">-w</font>, um den automatischen Zeilenumbruch
abzuschalten.</p></td></tr></table>

<p>Hier ein Beispiel der Datei /etc/resolv.conf:</p>

<a name="doc_pre6"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 6: /etc/resolv.conf Vorlage</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
domain mydomain.com
nameserver 10.0.0.1
nameserver 10.0.0.2
</pre></td></tr>
</table>
<p>Ersetzen Sie <font class="code">10.0.0.1</font> und <font class="code">10.0.0.2</font> mit den IP Adressen Ihres primären und
sekundären DNS Servers.</p>
<p class="secthead"><a name="_sect4">Test der Netzwerkanbindung </a></p>
<p>Da Ihre Netzwerkanbindung jetzt konfiguriert ist, sollte der Befehl <font class="code">/sbin/ifconfig -a</font> ausgeben,
 dass Ihre Netzwerkkarte (hoffentlich) arbeitet (achten Sie auf <font class="emphasis">UP</font> und <font class="emphasis">RUNNING</font> in der Ausgabe).
</p>

<a name="doc_pre7"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 7: /sbin/ifconfig bei einer arbeitenden Netzwerkkarte</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
eth0      Link encap:Ethernet  HWaddr 00:50:BA:8F:61:7A
          inet addr:192.168.0.2  Bcast:192.168.0.255  Mask:255.255.255.0
          inet6 addr: fe80::50:ba8f:617a/10 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:1498792 errors:0 dropped:0 overruns:0 frame:0
          TX packets:1284980 errors:0 dropped:0 overruns:0 carrier:0
          collisions:1984 txqueuelen:100
          RX bytes:485691215 (463.1 Mb)  TX bytes:123951388 (118.2 Mb)
          Interrupt:11
</pre></td></tr>
</table>

<p class="secthead"><a name="_sect5">Das Netzwerk ist jetzt online! </a></p>
<p>Der Netzwerkanschluss sollte nun konfiguriert und nutzbar sein. Sie sind nun in der Lage, sich via 
<font class="code">ssh</font>, <font class="code">scp</font> und <font class="code">wget</font> mit anderen Rechnern in Ihrem LAN oder im Internet zu
verbinden.</p>
<p class="chaphead">
<font class="chapnum"><a name="doc_chap6">6.</a></font>Einrichten der Partitionen</p>

<p>Nun, da der Kernel Netzwerk und Festplatten Kontroller  unterstüzt, wird es Zeit die Partitionen für Gentoo Linux
einzurichten.</p>

<p>
Hier nun ein kurzer Überblick über das Standard Layout der Partitionen
bei Gentoo Linux. Wir erzeugen mindestens drei Partitionen: eine Swap
Partition, eine Root Partition (hier liegt der Hauptteil von Gentoo Linux)
und eine spezielle Boot Partition. Die Boot Partition ist dazu bestimmt den
GRUB Bootmanager und den oder die Linux Kernel aufzunehmen. Die Boot Partition
ist ein sicherer Platz um alle zum booten relevanten Dateien abzulegen.
Bei der täglichen Nutzung sollte die Boot Partition <font class="emphasis">nicht gemountet</font>
bleiben. Dies verhindert, das der Kernel von GRUB nach einem System Absturz
nicht mehr geladen werden kann (z.B. wegen einem beschädigten Dateisystem).
Außerdem verhindert dies, dass das &quot;Henne-Ei-Problem&quot;, bei dem GRUB den Kernel
wegen einem kaputten Dateisystem nicht mehr laden kann, Sie das Dateisystem aber
reparieren könnten, wäre es nur möglich zu booten.</p>

<p>Weiter geht es mit den verschiedenen Dateisystemen. Momentan stehen Ihnen
vier Dateisystem zur Verfügung: XFS, ext2, ext3 (Journaling) und ReiserFS.
Ext2 ist ein erprobtes Linux Dateisystem, unterstützt aber kein Journaling.
Das Dateisystem ext3 ist eine Weiterentwicklung von ext2 und unterstützt
Metadaten Journaling sowie geordnete Schreibzugriffe 
und ein effektives Daten Journaling. ReiserFS ist ein B*-tree basiertes 
Dateisystem das eine sehr gute Performance bei der Handhabung kleiner Dateien
verspricht und deutlich performanter (10x-15x) als ext2 und ext3 ist, wenn kleine 
Dateien (kleiner 4k) im Spiel sind. Wie auch immer, momentan empfehlen wir die
Verwendung von ReiserFS, wegen wiederholtem Auftreten von Dateisystemfehlern in 
der 2.4.x Serie des Kernels, <font class="emphasis">nicht</font>. ReiserFS unterstützt Metadaten 
Journaling aber kein Daten Journaling. 
XFS ist ein &quot;high-performance, enterprise-class&quot; Dateisystem mit Metadaten
Journaling und wird voll von Gentoo Linux unterstützt.</p>

<p>
Wenn Sie ein Standard Dateisystem suchen, nehmen Sie ext2. Wenn Sie ein robustes Journaling 
Dateisystem brauchen, nehmen Sie ext3. Wenn Sie jedoch ein &quot;high performance&quot; Dateisystem ben,ötigen,
dass auch Journaling unterstützt, nehmen Sie XFS. Beide, ext3 und XFS sind bereits ausgreift. 
Alle Dateisysteme (bis auf ReiserFS) sind für den Produktionsbetrieb geeignet.
Wir empfehlen folgende Dateisystemgrößen und -arten:</p>

  <table class="ntable">
  <tr>
  	<td bgcolor="#7a5ada" class="infohead"><b>Partition</b></td>
	<td bgcolor="#7a5ada" class="infohead"><b>Größe</b></td>
	<td bgcolor="#7a5ada" class="infohead"><b>Typ</b></td>
  	<td bgcolor="#7a5ada" class="infohead"><b>Beispiel Device</b></td>
  </tr>
  <tr>
  	<td bgcolor="#ddddff" class="tableinfo">Boot Partition, enthält den/die Kernel und alle zum booten relevanten Information</td>
	<td bgcolor="#ddddff" class="tableinfo">100 Megabyte</td>
	<td bgcolor="#ddddff" class="tableinfo">ext2/3 empfohlen (einfach); wenn Sie ReiserFS verwenden, mounten Sie es mit der <font class="code">-o notail</font> Option</td>
  	<td bgcolor="#ddddff" class="tableinfo">/dev/hda1</td>
  </tr>
   <tr>
  	<td bgcolor="#ddddff" class="tableinfo">Swap Partition (es gibt kein 128 Megabyte Limit mehr)</td>
	<td bgcolor="#ddddff" class="tableinfo">&gt;=2*RAM wird empfohlen , ist aber seit Kernel 2.4.10 nicht mehr nötig</td>
	<td bgcolor="#ddddff" class="tableinfo">Linux swap</td>
  	<td bgcolor="#ddddff" class="tableinfo">/dev/hda2</td>
  </tr>
  <tr>
  	<td bgcolor="#ddddff" class="tableinfo">Root Partition, enthält das Hauptdateisystem (/usr, /home, usw.)</td>
	<td bgcolor="#ddddff" class="tableinfo">&gt;=1.5 Gigabyte</td>
	<td bgcolor="#ddddff" class="tableinfo">XFS, ext3 empfohlen; ext2 ok</td>
  	<td bgcolor="#ddddff" class="tableinfo">/dev/hda3</td>
  </tr>
 </table>

<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#bbffbb"><p class="note">
<b>Anmerkung: </b>Sie sollten nun Ihre Partition mit <font class="code">fdisk</font> erzeugen. Denken Sie daran, dass
der Partitionstyp für Swap (&quot;82&quot;) und für reguläre Partitionen (&quot;83&quot;) ist (egal ob Sie XFS, ext3 oder ext2 verwenden wollen).</p></td></tr></table>

<p>Wenn Sie Ihre Dateisysteme mit <font class="code">fdisk</font> erstellt haben, ist es jetzt an der Zeit,
diese zu initialisieren. Die Swap Partition richten Sie folgendermaßen ein:</p>
<a name="doc_pre8"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 8</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
# <font class="input">mkswap /dev/hda2</font>
</pre></td></tr>
</table>
<p>Mit dem Kommando <font class="code">mke2fs</font> erstellen Sie ext2 Dateisysteme:</p>
<a name="doc_pre9"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 9</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
# <font class="input">mke2fs /dev/hda1</font>
</pre></td></tr>
</table>
<p>Um ein XFS Dateisystem zu erstellen, verwenden Sie <font class="code">mkfs.xfs</font>
</p>
<a name="doc_pre10"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 10</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
# <font class="input">mkfs.xfs /dev/hda3</font>
</pre></td></tr>
</table>
<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#bbffbb"><p class="note">
<b>Anmerkung: </b>
Es kann sein, dass Sie <font class="code">mkfs.xfs</font> mit einigen Optionen verwenden wollen, 
wie z.B.: <font class="code">-d agcount=3 -l size=32m</font>. Die Option <font class="code">-d agcount=3</font> verringert die Anzahl an
&quot;allocation groups&quot;. XFS wird auf jeden Fall eine &quot;allocation group&quot; pro
4GB auf der Partition einrichten, d.h. auf einer 20GB Partition ist der minimale Wert für
<font class="emphasis">agcount</font> 5. Der Parameter <font class="code">-l size=32m</font> erhöht die Größe des Journals auf 32MB, was
die Performance verbessert.</p></td></tr></table> 

<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#ffbbbb"><p class="note">
<b>Warnung: </b>Wenn Sie ein XFS Dateisystem auf eine bestehende ReiserFS Partition installieren, können spätere 
Versuche die Partition zu mounten fehlschlagen, wenn Sie das Dateisystem nicht explizit angeben :
<font class="code">mount -t xfs</font>. Um dies zu Umgehen, sollten Sie die alte ReiserFS Partition mit Nullen 
überschreiben bevor Sie das XFS Dateisystem erstellen: 
<font class="code">dd if=/dev/zero of=/dev/hd<font class="comment">x</font> bs=1k</font>.</p></td></tr></table>

<p>Wenn Sie ext3 verwenden wollen, erstellen Sie das Datesystem mit folgendem Befehl: <font class="code">mke2fs -j</font>:</p>
<a name="doc_pre11"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 11</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
# <font class="input">mke2fs -j /dev/hda3</font>
</pre></td></tr>
</table>
<p>Um ein ReiserFS Datesystem zu erstellen, verwenden Sie das <font class="code">mkreiserfs</font> Kommando:</p>
<a name="doc_pre12"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 12</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
# <font class="input">mkreiserfs /dev/hda3</font>
</pre></td></tr>
</table>

<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#ffbbbb"><p class="note">
<b>Warnung: </b>
Um Sie noch einmal darauf hinzuweisen, momentan raten wir von ReiserFS ab. Obwohl ReiserFS bei vielen Benutzern fehlerfrei arbeitet, gibt es ein allgemeines Problem mit Dateisystemkorruption bei ReiserFS in Verbindung
mit den Kernel der Serie 2.4.x.</p></td></tr></table>

<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#bbffbb"><p class="note">
<b>Anmerkung: </b>Mehr Informationen zum Thema ext3 unter Linux 2.4 finden Sie hier: <a href="http://www.zip.com.au/~akpm/linux/ext3/ext3-usage.html">http://www.zip.com.au/~akpm/linux/ext3/ext3-usage.html</a>.</p></td></tr></table>
<p class="chaphead">
<font class="chapnum"><a name="doc_chap7">7.</a></font>Partitionen mounten</p>
<p>
Aktivieren Sie nun Ihre Swap Partition, denn es könnte sein, dass Sie den virtuellen Speicher
später noch benötigen:</p>
<a name="doc_pre13"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 13</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
# <font class="input">swapon /dev/hda2</font>
</pre></td></tr>
</table>
<p>Als nächstes erstellen Sie die Verzeichnisse <font class="path">/mnt/gentoo</font> und <font class="path">/mnt/gentoo/boot</font>, anschliessend mounten Sie Ihre Partitionen:</p>
<a name="doc_pre14"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 14</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
# <font class="input">mkdir /mnt/gentoo</font>
# <font class="input">mount /dev/hda3 /mnt/gentoo</font>
# <font class="input">mkdir /mnt/gentoo/boot</font>
# <font class="input">mount /dev/hda1 /mnt/gentoo/boot</font>
</pre></td></tr>
</table>
<p>Wenn Sie Gentoo Linux mit separaten <font class="path">/usr</font> oder <font class="path">/var</font> Partitionen 
installieren, müssen diese dann an die entsprechenden Verzeichnisse gemountet werden 
(<font class="path">/mnt/gentoo/usr</font> und <font class="path">/mnt/gentoo/var</font>).</p>
   
<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#ffffbb"><p class="note">
<b>Wichtig: </b>Wenn Ihre <font class="emphasis">boot</font> Partition, dort wo der Kernel unterbracht ist, eine ReiserFS 
Partition ist, achten Sie darauf, das diese mit der <font class="code">-o notail</font> Option gemountet wird,
sonst wird GRUB nicht richtig installiert. Stellen Sie auch sicher, dass die Option 
<font class="code">notail</font> auch mit in die <font class="path">/etc/fstab</font> mit eingetragen wird. 
Dazu kommen wir gleich.</p></td></tr></table>
<p class="chaphead">
<font class="chapnum"><a name="doc_chap8">8.</a></font>Die CD-ROM mounten</p>
<p>Auch wenn Sie von der CD-ROM gebootet haben, ist diese in der minimalen Linux Umgebung nicht
gemountet. Sie müssen die CD-ROM erst mounten damit Sie auf die komprimierten Installationsarchive
zugreifen zu können. Um die CD-ROM zu mounten, tippt man gewöhnlich:</p>
<a name="doc_pre15"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 15</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
# <font class="input">mount /dev/cdroms/cdrom0 /mnt/cdrom -o ro -t iso9660</font>
</pre></td></tr>
</table>
<p>Wenn die CD-ROM gemountet ist, sollten Sie mit dem Befehl: <font class="code">ls /mnt/cdrom</font> in der Lage
sein, die <font class="code">stage???.tbz2</font> Dateien zu sehen.</p>
<p class="chaphead">
<font class="chapnum"><a name="doc_chap9">9.</a></font>Entpacken des gewünschten stage*.tbz2 Archivs</p>

<p>Nun wird es Zeit, das ausgewählte, komprimierte Archiv nach <font class="path">/mnt/gentoo</font> zu entpacken.
Danach wechseln Sie mit <font class="code">chroot</font> hinüber in die neue Gentoo Linux Installation,</p>

<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#ffffbb"><p class="note">
<b>Wichtig: </b>Achten Sie darauf, dass Sie das Archiv mit der Option <font class="code">p</font>  entpacken.
Wenn Sie dies vergessen, werden die Rechte einiger Dateien nicht stimmen.</p></td></tr></table>

<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#ffffbb"><p class="note">
<b>Wichtig: </b>Wenn Sie die &quot;bau alles von Grund auf neu&quot; (stage1) Installation gewählt haben, 
werden Sie das <font class="path">stage1-ix86-1.2.tbz2</font> Archiv verwenden wollen.
Wenn Sie eine der größeren CDs verwenden, haben Sie die Wahl zwischen dem
&quot;stage2&quot; und dem &quot;stage3&quot; Archiv. Diese Archive sparen Ihnen eventuell Zeit, das aber
auf Kosten der Flexibilität (wir haben die Compiler Optimierung und USE Variablen
für Sie ausgewählt). Das &quot;stage3&quot; Archiv enthält zusätzlich noch 
die Quellen des Linux Kernels und eine Kopie des &quot;Portage tree&quot;, um ein
 <font class="code">emerge rsync</font> zu einem späteren Zeitpunkt zu vermeiden.</p></td></tr></table>

<a name="doc_pre16"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 16</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
# <font class="input">cd /mnt/gentoo</font>
# <font class="input">tar -xvjpf /mnt/cdrom/stage?-*.tbz2</font>
# <font class="input">mount -o bind /proc /mnt/gentoo/proc</font>
# <font class="input">cp /etc/resolv.conf /mnt/gentoo/etc/resolv.conf</font>
</pre></td></tr>
</table>

<a name="doc_pre17"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 17</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
# <font class="input">chroot /mnt/gentoo /bin/bash</font>
# <font class="input">env-update</font>
Regenerating /etc/ld.so.cache...
# <font class="input">source /etc/profile</font>
# 
</pre></td></tr>
</table>

<p>Nachdem Sie diese Kommandos ausgeführt haben, befinden Sie sich &quot;innerhalb&quot; Ihrer neuen
Gentoo Linux Umgebung.</p>

<p class="chaphead">
<font class="chapnum"><a name="doc_chap10">10.</a></font>Rsync</p>
<p>
Als nächstes ist es nötig, <font class="code">emerge rsync</font> aufzurufen. Wenn Sie ein Gentoo Linux 1.1+ stage3
Archiv verwenden, ist <font class="code">emerge rsync</font> jetzt optional, da dort eine Kopie des 
Portage Verzeichnisses beigelegt ist. Mit dem Kommando <font class="code">emerge rsync</font> veranlassen Sie <font class="code">emerge</font>, 
sich mit rsync.gentoo.org zu verbinden und die aktuellste Version des Portage Verzeichnisses herunterzuladen:
</p>

<a name="doc_pre18"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 18</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
# <font class="input">emerge rsync</font>
</pre></td></tr>
</table>

<p>Das Portage Datenverzeichnis, dass heruntergeladen wird, ist ca. 10MB groß.</p>

<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#ffffbb"><p class="note">
<b>Wichtig: </b>Die aktuelle Adresse des &quot;rsync&quot; Servers ist momentan: rsync://rsync.gentoo.org/gentoo-portage. 
Wenn Sie Schwierigkeiten haben, den Server zu erreichen, stellen Sie sicher, dass Sie 
auch diesen Server verwenden, in dem Sie die SYNC Variable in Ihrer /etc/make.conf entsprechend
setzen.</p></td></tr></table>

<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#bbffbb"><p class="note">
<b>Anmerkung: </b>Sie können <font class="code">rsync</font> so konfigurieren, das es einen HTTP Proxy verwendet.
Dies ist nützlich, wenn Sie sich hinter einer Firewall befinden. Um dies zu 
konfigurieren, tragen Sie die Variable <font class="input">RSYNC_PROXY=&quot;hostname:port&quot;</font> in die
/etc/make.conf ein oder setzen dies als Umgebungsvariable.
</p></td></tr></table>

<p class="chaphead">
<font class="chapnum"><a name="doc_chap11">11.</a></font>Von &quot;stage1&quot; zu &quot;stage2&quot;</p>

<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#ffffbb"><p class="note">
<b>Wichtig: </b>Wenn Sie ein &quot;stage2&quot; oder &quot;stage3&quot; Archiv verwenden, dann haben wir 
den <font class="code">bootstrap</font> Prozess bereits für Sie durchgeführt. Es ist nicht 
nötig, dies noch einmal zu tun, außer Sie hatten sich entschieden  ein 
<font class="code">emerge rsync</font> durchzuführen, um sicherzustellen, ein aktuelles 
Gentoo Linux System zu haben. Die meisten Anwender, die sich für ein
&quot;stage2&quot; oder &quot;stage3&quot; Archiv entschieden haben, werden <font class="input">nicht</font> noch
einmal den <font class="code">bootstrap</font> Prozess durchlaufen wollen, da er selbst auf
sehr schnellen Rechnern bis zu einer Stunde dauern kann.</p></td></tr></table>


<p>Da Sie nun eine funktionierende Kopie des Portage Verzeichnisses haben,
müssen Sie nun den Gentoo Linux &quot;bootstrap&quot; Prozess durchlaufen. Dazu gehen
Sie folgendermaßen vor: Zuerst editieren Sie die Datei <font class="path">/etc/make.conf</font>.
In dieser Datei können Sie die USE Variable an Ihre Gegebenheiten anpassen.
Über die USE Variable können Sie steuern, welche optionale Funktionalität Sie
in die Pakete eingebaut haben möchten. Normalerweise ist die vorgegebene Einstellung,
eine <font class="emphasis">leere</font> oder ungesetzte USE Variable, ausreichend. Wichtig ist, dass Sie 
die passenden Werte für die <font class="code">CHOST</font>, <font class="code">CFLAGS</font> und <font class="code">CXXFLAGS</font> für
Ihr System eintragen. (Kommentierte Beispiele sind weiter unten in der Datei
vorhanden). Falls Sie sich hinter einer Firewall befinden, sollte dort auch ein Proxy 
eingetragen werden.</p>

<a name="doc_pre19"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 19</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
# <font class="input">nano -w /etc/make.conf</font> <font class="comment">(Passen Sie die Einträge an)</font>
</pre></td></tr>
</table>
<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#bbffbb"><p class="note">
<b>Anmerkung: </b>
Anwender, die Ihr System wesentlich optimieren müssen oder wollen, sollten einen
Blick in die Datei <font class="path">/etc/make.globals</font> werfen. Diese Datei umfasst alle
Gentoo Linux Vorgaben und sollte nicht verändert werden. Wem diese Vorgaben nicht
genügen, sollte seine Änderungen in die Datei <font class="path">/etc/make.conf</font> eintragen,
da Einträge in der <font class="path">make.conf</font> die vorgegebenen Werte der 
<font class="path">make.globals</font> überschreiben. Wenn Sie die USE Einstellungen tunen 
wollen, schauen Sie sich die Datei <font class="path">/etc/make.profile/make.defaults</font> 
genauer an. Wenn Sie beispielsweise eine der vorhanden Einstellungen deaktivieren
wollen, setzen Sie den entsprechenden <font class="code">USE=&quot;-foo&quot;</font> Eintrag in der /etc/make.conf.
(Dies würde das USE Flag <font class="code">foo</font> abschalten) </p></td></tr></table>

<p>Jetzt können Sie den &quot;bootstrap&quot; Prozess starten. Das dauert 1-2 Stunden; abhängig davon,
wie flott Ihr Rechner ist. Auf einem 900Mhz AMD Athlon System dauert der Prozess ca. 1 Stunde.
Während der Zeit wird der Rechner darauf vorbereitet, den Rest des Systems zu kompilieren.
Die GNU Compiler Suite, sowie die GNU C Bibliothek werden gebaut. Dies sind zeitaufwendige 
Vorgänge, die den Hauptteil des &quot;bootstrap&quot; Prozesses ausmachen: </p>

<a name="doc_pre20"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 20</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
# <font class="input">cd /usr/portage</font>
# <font class="input">scripts/bootstrap.sh</font>
</pre></td></tr>
</table>
<p>Der &quot;bootstrap&quot; Prozess startet.</p>
<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#bbffbb"><p class="note">
<b>Anmerkung: </b>
Normalerweise verwendet Portage <font class="code">/var/tmp</font> während des kompilierens der Pakete.
Dabei kann es sein, dass mehrere hundert Megabyte des temporären Speichers verwendet 
werden. Wenn Sie den Ort, wo Portage die temporären Dateien ablegt, ändern möchten,
können Sie dies <font class="emphasis">vor</font> dem Starten des &quot;bootstrap&quot; Prozesses durch setzen der 
PORTAGE_TMPDIR Variable tun:</p></td></tr></table>
<a name="doc_pre21"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 21</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
# <font class="input">export PORTAGE_TMPDIR=&quot;/otherdir/tmp&quot;</font>
</pre></td></tr>
</table>

<p>
Das Skript <font class="code">bootstrap.sh</font> baut nun <font class="code">binutils</font>, <font class="code">gcc</font>, <font class="code">gettext</font> und
<font class="code">glibc</font>.Danach werden <font class="code">binutils</font>, <font class="code">gcc</font> sowie <font class="code">gettext</font> mit der neuen
<font class="code">glibc</font> erneut gebaut. Es muss nicht gesagt werden, dass dieser Prozess seine Zeit braucht.
Machen Sie ein kleines Nickerchen. Wenn der Prozess dann durchgelaufen ist, haben Sie den Stand 
des &quot;stage2&quot; Archivs erreicht.</p>
<p class="chaphead">
<font class="chapnum"><a name="doc_chap12">12.</a></font>Von &quot;stage2&quot; zu &quot;stage3&quot;</p>

<p>Nachdem der &quot;bootstrap&quot; Prozess abgeschlossen ist und Sie nun bei &quot;stage2&quot; 
(noch einmal, wenn Sie das &quot;stage3&quot; Archiv verwenden, sind alle diese Schritte 
nicht nötig) angelangt sind, ist es an der Zeit, den Rest des Basissystems zu
bauen und zu installieren: </p>

<a name="doc_pre22"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 22</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
# <font class="input">export CONFIG_PROTECT=&quot;&quot;</font>
# <font class="input">emerge --pretend system</font>
	<font class="comment">[listet alle zu installierenden Pakete auf]</font>
# <font class="input">emerge system</font>
</pre></td></tr>
</table>

<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#bbffbb"><p class="note">
<b>Anmerkung: </b>Das Kommando <font class="code">export CONFIG_PROTECT=&quot;&quot;</font> stellt sicher, dass alle
neuen Scripte, die nach <font class="path">/etc</font> installiert werden, die alten 
Scripte (aus dem Paket <font class="path">sys-apps/baselayout</font>) auch überschreiben 
können. Dazu wird Portages neuer Mechanismus zum Schutz von Konfigurationsdateien
umgangen. Genaueres erfahren Sie, wenn Sie <font class="code">emerge --help config</font> aufrufen.</p></td></tr></table>
 
<p>Es dauert seine Zeit, das ganze Basissystem zu bauen. Ihr Lohn ist, das es
gänzlich auf Ihren Rechner optimiert ist. Leider müssen Sie einen Weg finden,
sich bis zu diesem Zeitpunkt zu beschäftigen. Der Autor empfiehlt &quot;Star
Wars - Super Bombad Racing&quot; für die PS2. Wenn <font class="code">emerge system</font> fertig ist,
sind Sie auf dem Stand des &quot;stage3&quot; Archivs.</p>

<p class="chaphead">
<font class="chapnum"><a name="doc_chap13">13.</a></font>Letzte Schritte: Zeitzone</p>

<p>Sie sollten nun ein &quot;stage3&quot; System haben, das zur abschließenden Konfiguration bereit ist.
Sie beginnen mit dem Einstellen der Zeitzone. Durch setzen der Zeitzone, bevor der Kernel
gebaut wird, stellen Sie sicher, das Sie eine sinnvolle <font class="code">uname -a</font> Ausgabe bekommen.</p>

<p>Sie finden die Zeitzonendateien (oder GMT, wenn Sie Greenwich Mean Time einstellen wollen)
in <font class="path">/usr/share/zoneinfo</font>. Erstellen Sie nun einen symbolischen Link:</p>

<a name="doc_pre23"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 23</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
# <font class="input">ln -sf /usr/share/zoneinfo/pfad/zur/zeitzonendatei /etc/localtime</font>
</pre></td></tr>
</table>
<p class="chaphead">
<font class="chapnum"><a name="doc_chap14">14.</a></font>Letze Schritte: Kernel und System Logger</p>
<p>
Wenn Sie mit dem &quot;stage3&quot; Archiv installieren, erleichtern wir Ihnen die Arbeit durch 
bereitstellen der aktuellen Linux Quellen in <font class="path">/usr/src/linux</font>.
Ansonsten müssen Sie die Linux Quellen mit <font class="code">emerge</font> nachinstallieren.
Zur Zeit bieten wir folgende Pakete (ebuilds) an:</p>
<table class="ntable">
<tr>
<td bgcolor="#7a5ada" class="infohead"><b>ebuild</b></td>
<td bgcolor="#7a5ada" class="infohead"><b>Beschreibung</b></td>
</tr>
<tr>
<td bgcolor="#ddddff" class="tableinfo"><font class="path">gentoo-sources</font></td>
<td bgcolor="#ddddff" class="tableinfo">Ein von uns Leistungs- und Funktionalitätserweiterter Kernel, basierenden auf den -ac Quellen (ohne XFS Unterstützung)</td>
</tr>
<tr>
<td bgcolor="#ddddff" class="tableinfo"><font class="path">xfs-sources</font></td>
<td bgcolor="#ddddff" class="tableinfo">Ein Auszug aus der SGI XFS CVS Linux Quellen. Verwenden Sie diesen Kernel wenn Sie XFS verwenden wollen</td>
</tr>
<tr>
<td bgcolor="#ddddff" class="tableinfo"><font class="path">openmosix-sources</font></td>
<td bgcolor="#ddddff" class="tableinfo">Ein Linux Kernel mit Unterstützung der GPL <a href="http://www.openmosix.com">openMosix</a> Load-Balancing/Clustering Technologie</td>
</tr>
<tr>
<td bgcolor="#ddddff" class="tableinfo"><font class="path">usermode-sources</font></td>
<td bgcolor="#ddddff" class="tableinfo">Ein Linux Kernel der Unterstützung für User-Mode Linux.  (&quot;Linux inside Linux&quot; Technologie)</td>
</tr>
<tr>
<td bgcolor="#ddddff" class="tableinfo"><font class="path">vanilla-sources</font></td>
<td bgcolor="#ddddff" class="tableinfo">Die unveränderten Linux Kernel Quellen von kernel.org</td>
</tr>
</table>

<p>Wählen Sie einen aus und installieren Sie ihn wie folgt:</p>

<a name="doc_pre24"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 24</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
# <font class="input">emerge sys-kernel/gentoo-sources</font>
</pre></td></tr>
</table>

<p>Sobald Sie die Linux Quellen installiert haben, können Sie Ihren eigenen Kernel kompilieren:</p>

<a name="doc_pre25"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 25</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
# <font class="input">cd /usr/src/linux</font>
# <font class="input">make menuconfig</font>
# <font class="input">make dep &amp;&amp; make clean bzImage modules modules_install</font>
# <font class="input">mv /boot/bzImage /boot/bzImage.orig</font> <font class="comment">[falls bzImage bereits existiert]</font>
# <font class="input">cp /usr/src/linux/arch/i386/boot/bzImage /boot</font>
</pre></td></tr>
</table>
<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#ffbbbb"><p class="note">
<b>Warnung: </b>
Damit Ihr Kernel fehlerfrei funktioniert, müssen Sie sicherstellen, dass einige wichtige
Optionen <font class="input">aktiviert sind und nicht als Modul kompiliert</font> werden. Sie müssen die
Option <font class="input">&quot;Code maturity level options --&gt; Prompt for development and/or incomplete code/drivers&quot;</font>
aktivieren, damit alle nötigen Optionen verfügbar sind.
Im Menü &quot;File systems&quot; aktivieren Sie den Punkt <font class="input">&quot;Device File System&quot;</font> (beachten Sie, dass
Sie die &quot;/dev/pts file system support&quot; Option <font class="emphasis">nicht</font> aktivieren müssen). Sie müssen
außerdem noch den Punkt <font class="input">&quot;Virtual Memory Filesystem&quot;</font> aktivieren. Entsprechend der 
Dateisysteme, die Sie verwenden wollen, aktivieren Sie die Unterstützung für ReiserFS 
(&quot;Reiserfs support&quot;), Ext3 (&quot;Ext3 journalling file system support&quot;) oder 
XFS (&quot;SGI XFS filesystem support&quot;). Es ist immer eine gute Idee, auch die Unterstützung 
Ext2 (&quot;Second extended fs support&quot;) einzubinden, auch wenn Sie es nicht verwenden.
Wenn Sie IDE Festplatten verwenden, sollten Sie zusätzlich die Option &quot;USE DMA by default&quot; aktivieren,
da die Festplatten sonst sehr langsam sind. Natürlich muss dazu die Unterstützung für IDE Festplatten 
(&quot;IDE disk support&quot;) mitkompiliert werden, da der Kernel diese Platten sonst nicht sieht.</p></td></tr></table>




<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#ffffbb"><p class="note">
<b>Wichtig: </b>
Wenn Sie einen IDE CD Brenner verwenden, müssen Die die SCSI Emulation für IDE Geräte des Kernels
aktivieren. Aktivieren dazu Sie die Optionen &quot;ATA/IDE/MFM/RLL support&quot; ---&gt; &quot;IDE, ATA and ATAPI Block 
devices&quot; ---&gt; &quot;SCSI emulation support&quot; (wenn Sie ea vorziehen, auch als Modul). Zusätzlich müssen
&quot;SCSI support&quot; sowie &quot;SCSI CD-ROM support&quot; und &quot;SCSI generic support&quot; (wenn gewünscht auch als 
Module) im Kernel aktiviert sein. Wenn Sie sich für Module entschieden haben, tragen Sie
in die diese noch mit dem Befehl: <font class="code">echo -e &quot;ide-scsi\nsg\nsr_mod&quot;  &gt;&gt; /etc/modules.autoload</font>
in die Datei <font class="path"> /etc/modules.autoload</font> ein, damit die Module auch automatisch geladen werden, 
wenn der Rechner bootet.
</p></td></tr></table>

<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#bbffbb"><p class="note">
<b>Anmerkung: </b>
Wenn Sie einen Kernel der 2.2er Serie vorziehen, ist es nun möglich, einen solchen 
zu installieren. Die Stabilität, die ein solcher Kernel bietet hat aber ihren Preis:
Sie verlieren viele der neuen Fähigkeiten die ein 2.4er Kernel bietet (z.B.: XFS und
tmpfs Dateisysteme, iptables, uvm.); aber es gibt Patches, damit ReiserFS und devfs
auch von einem 2.2er Kernel unterstützt werden.
Die Gentoo Linux Boot Scripte benötigen entweder &quot;tmpfs&quot; oder &quot;ramdisk&quot; Support im
Kernel, d.h. Anwender des 2.2er Kernels müssen sicherstellen, das der Kernel 
mit &quot;ramdisk support&quot; kompiliert wird (nicht als Modul). Es ist <font class="emphasis">entscheidend</font>,
das bei einem 2.2er Kernel in der <font class="path">/boot/grub/menu.lst</font> die Option
<font class="emphasis">gentoo=notmpfs</font> angegeben wird, damit von den Boot Scripten anstelle des 
&quot;tmpfs&quot; eine Ramdisk gemountet wird. Wenn Sie auch auf devfs verzichten wollen,
tragen Sie dort stattdessen <font class="emphasis">gentoo=notmpfs,nodevfs</font> ein.
</p></td></tr></table>

<p>Ihr eigener Kernel (und die Module) sind jetzt installiert. Als nächstes sollten
Sie das Logsystem installieren. Wir bieten <font class="code">sysklogd</font>, das übliche Set von 
&quot;logging daemons&quot;. Außerdem stehen noch <font class="code">syslog-ng</font> und <font class="code">metalog</font> zur
Verfügung.Power User scheinen sich von sysklogd (schlechte Performance) abzuwenden und
sich für syslog-ng oder metalog zu entscheiden. Wenn Sie sich nicht sicher sind, 
versuchen Sie metalog, da es ziemlich populär zu sein scheint.
Um einen der Logger zu installieren, tippen Sie <font class="emphasis">eine</font> der folgenden drei Zeilen: 
</p>

<a name="doc_pre26"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 26</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
# <font class="input">emerge sys-apps/sysklogd</font>
# <font class="input">rc-update add sysklogd default</font>
<font class="comment">oder</font>
# <font class="input">emerge app-admin/syslog-ng</font>
# <font class="input">rc-update add syslog-ng default</font>
<font class="comment">oder</font>
# <font class="input">emerge app-admin/metalog</font>
# <font class="input">rc-update add metalog default</font>
</pre></td></tr>
</table>
<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#ffbbbb"><p class="note">
<b>Warnung: </b>
Wenn Sie syslog-ng installieren, müssen Sie auch <font class="path">/etc/syslog-ng/syslog-ng.conf</font> erstellen.
Eine Beispielkonfiguration finden Sie in <font class="path">/etc/syslog-ng</font> </p></td></tr></table>

<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#ffffbb"><p class="note">
<b>Wichtig: </b>
Metalog schreibt seine Daten blockweise auf die Festplatte, was bewirkt, das Nachrichten
nicht sofort in den Logdateien auftauchen. Wenn sie versuchen, einen Daemon zu debuggen,
ist dieses Verhalten weniger hilfreich. Wenn Sie Ihr Gentoo Linux System in Gang gebracht 
haben, können Sie Metalog mit dem USR1 Signal veranlassen, das Puffern der Nachrichten 
temporär zu deaktivieren (was bedeutet, das <font class="input">tail -f <font class="path">/var/log/irgendwas</font></font>,
wie erwartet, in Echtzeit arbeitet). Mit dem USR2 Signal schalten Sie den Datenpuffer 
wieder ein.</p></td></tr></table>

<p>
Sie können jetzt ein beliebiges &quot;cron&quot; Paket zur Installation auswählen. Momentan bieten wir
&quot;dcron&quot;, &quot;fcron&quot;, &quot;vcron&quot; an. Wenn Sie nicht wissen, welches Sie nehmen sollen, nehmen Sie 
&quot;vcron&quot;. Installiert wird folgendermaßen:</p>
<a name="doc_pre27"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 27</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
# <font class="input">emerge sys-apps/dcron</font>
# <font class="input">crontab /etc/crontab</font>
<font class="comment">oder</font>
# <font class="input">emerge sys-apps/fcron</font>
# <font class="input">crontab /etc/crontab</font>
<font class="comment">oder</font>
# <font class="input">emerge sys-apps/vcron</font>
</pre></td></tr>
</table>
<p>Nähere Informationen darüber, wie &quot;cron&quot; bei Gentoo Linux arbeitet, finden Sie
<a href="http://lists.gentoo.org/pipermail/gentoo-announce/2002-April/000151.html">hier</a>.</p>
<p class="chaphead">
<font class="chapnum"><a name="doc_chap15">15.</a></font>Letzte Schritte: Zusätzlich Pakete installieren</p>
<p>
Wenn Sie optionale Features, wie XFS oder LVM (Logical Volume Manager) verwenden, benötigen 
Sie noch zusätzliche Pakete. Wenn Sie XFS verwenden, sollten Sie das Paket <font class="code">xfsprogs</font> 
installieren:</p>
<a name="doc_pre28"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 28</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
# <font class="input">emerge sys-apps/xfsprogs</font>
</pre></td></tr>
</table>
<p>Das Paket <font class="code">lvm-user</font> wird benötigt, wenn Sie LVM benutzen:</p>
<a name="doc_pre29"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 29</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
# <font class="input">emerge --usepkg sys-apps/lvm-user</font>
</pre></td></tr>
</table>
<p>Wenn Sie die PCMCIA Slots eines Laptops oder Notebooks nach dem ersten Booten
verwenden wollen, stellen Sie sicher, dass das Paket <font class="code">pcmcia-cs</font> installiert
ist:</p>
<a name="doc_pre30"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 30</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
# <font class="input">emerge sys-apps/pcmcia-cs</font>
</pre></td></tr>
</table>
<p class="chaphead">
<font class="chapnum"><a name="doc_chap16">16.</a></font>Letzte Schritte: /etc/fstab</p>
<p>Ihr Gentoo Linux System ist beinahe gebrauchsfertig. Sie müssen nur noch einige wichtige
Systemdateien anpassen und den GRUB Bootmanager installieren.
Die erste Datei, die Sie anpassen sollten, ist <font class="path">/etc/fstab</font>. Denken Sie bitte an
die <font class="code">notail</font> Option, falls Ihre Bootpartition ein ReiserFS Dateisystem enthält.
Achten Sie auch darauf, die Dateisystemtypen <font class="code">ext2</font>, <font class="code">ext3</font> oder <font class="code">reiserfs</font>,
Ihrer Konfiguration entsprechend einzutragen. Sie können das unten stehende Beispiel einer 
<font class="path">/etc/fstab</font> verwenden, müssen aber darauf achten, für &quot;ROOT&quot; und &quot;SWAP&quot; 
die entsprechenden Geräte einzutragen (z.B.: <font class="code">hda1</font>, usw..).</p>
<a name="doc_pre31"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 31</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
<font class="comment">
# /etc/fstab: static file system information.
#
# &quot;noatime&quot; schaltet &quot;atimes&quot; (man mount) ab und erhöht so die Performance (&quot;atimes&quot;
# wird normalerweise nicht benötigt und &quot;notail&quot; erhöht die Leistung eines ReiserFS
# Dateisystems, allerdings auf Kosten der Speicherausnutzung). Wenn Sie frei zwischen
# &quot;tail&quot; oder &quot;notail&quot; wählen wollen, lassen Sie die &quot;noatime&quot; Option sicherheitshalber
# weg.


# &lt;fs&gt;           &lt;mountpoint&gt;   &lt;type&gt;   &lt;opts&gt;          &lt;dump/pass&gt;

# WICHTIG: Wenn Ihre BOOT Partition ein ReiserFS enthält, hängen Sie die &quot;notail&quot; Option an.
</font>
/dev/BOOT           /boot       ext2	 noauto,noatime	 1 2
/dev/ROOT           /           ext3	 noatime         0 1
/dev/SWAP           none        swap	 sw              0 0
/dev/cdroms/cdrom0  /mnt/cdrom  iso9660	 noauto,ro       0 0
proc                /proc       proc	 defaults        0 0
</pre></td></tr>
</table>

<p class="secthead"><a name="_sect2">Letzte Schritte: Das Passwort für &quot;root&quot; setzten: </a></p>
<p>Bevor Sie es vergessen, das &quot;root&quot; Passwort setzen Sie durch eingeben von:</p>
<a name="doc_pre32"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 32</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
# <font class="input">passwd</font>
</pre></td></tr>
</table>
<p class="secthead"><a name="_sect3">Letzte Schritte: /etc/hostname </a></p>
<p>Tragen Sie in diese Datei den kompletten Namen (Hostname + Domain) Ihres Rechners, 
in einer einzelnen Zeile, ein (<font class="code">mymachine.mydomain.com</font>). 

</p>
<p class="secthead"><a name="_sect4">Letzte Schritte: /etc/hosts </a></p>
<p>Diese Datei enthält eine Liste von IP Adressen, mit den dazu gehörigen Rechnernamen.
Das System verwendet diese Daten, um einem Rechnernamen die IP Adresse zuordnen zu können,
falls Ihr Nameserver ausgefallen ist oder es nicht selbst tut. Hier ein Beispiel:</p>
<a name="doc_pre33"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 33</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
127.0.0.1      localhost
<font class="comment"># die folgende Zeile enthält die IP des Rechners im LAN und den dazu gehörigen Rechnernamen.</font>
192.168.1.1    mymachine.mydomain.com	mymachine
</pre></td></tr>
</table>
<p class="secthead"><a name="_sect5">Abschließende Netzwerkkonfiguration </a></p>
<p>
Tragen Sie die Namen aller Module, die für den Betrieb Ihres Systems erforderlich sind, 
in die Datei <font class="path">/etc/modules.autoload</font> ein (hängen Sie die nötigen Optionen
einfach an den Modulnamen an). Gentoo Linux wird diese Module dann während des Bootvorgangs
automatisch laden. Von besonderer Bedeutung ist das Modul Ihrer Netzwerkkarte (falls
es als Modul kompiliert wurde):
</p>
<a name="doc_pre34"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 34: /etc/modules.autoload</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
3c59x
</pre></td></tr>
</table>
<p>Passen Sie die Einträge in dem Script <font class="path">/etc/conf.d/net</font> an Ihre Gegebenheiten
an, bevor Sie das erste mal booten:</p>
<a name="doc_pre35"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 35</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
# <font class="input">nano -w /etc/conf.d/net</font>
# <font class="input">rc-update add net.eth0 default</font>
</pre></td></tr>
</table>
<p>
Sollten Sie mehrere Netzwerkkarten verwenden, müssen Sie für jede ein eigenes
<font class="path">net.ethx</font> Script erstellen (<font class="comment">x</font> = 1, 2, ...):
</p>
<a name="doc_pre36"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 36: Mehrere Netzwerkverbindungen</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
# <font class="input">cd /etc/init.d</font>
# <font class="input">cp net.eth0 net.eth<font class="comment">x</font></font>
# <font class="input">rc-update add net.eth<font class="comment">x</font> default</font>
</pre></td></tr>
</table>
<p>
Wenn Sie eine PCMCIA Karte installiert haben, prüfen Sie, ob die Einstellungen in
der Datei /etc/init.d/pcmcia Ihrer Konfiguration entsprechen und fügen dann
<a name="doc_pre37"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 37</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
depend() {
	need pcmcia
}
</pre></td></tr>
</table>
am Kopf der Datei <font class="path">/etc/init.d/net.ethx</font> ein,
damit die PCMCIA Treiber automatisch geladen werden, wenn die Netzwerkverbindung
aufgebaut wird.
</p>
<p class="secthead"><a name="_sect6"> Letzte Schritte: Tunen der Festplatten (hdparm) </a></p>
<p>
Dummerweise, gehen die Einstellungen, die Sie mit <font class="code">hdparm</font> am Anfang der 
Installation vorgenommen haben, durch einen Reboot verloren. Um die
Festplatten bei bei jedem Bootvorgang neu zu optimieren, schreiben Sie die
<font class="code">hdparm</font> Kommandos einfach in die <font class="path">/etc/conf.d/local.start</font>:
</p>
<a name="doc_pre38"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 38</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>    
# <font class="input">nano -w /etc/conf.d/local.start</font>    
</pre></td></tr>
</table>    
<a name="doc_pre39"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 39: hdparm Optimierungen in der /etc/conf.d/local.start</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>    
# This is a good place to load any misc.    
# programs on startup ( 1&gt;&amp;2 )        

# Um DMA bei den Festplatten <font class="emphasis">hda</font> und <font class="emphasis">hdb</font> zu aktivieren  
hdparm -d 1 /dev/hda    
hdparm -d 1 /dev/hdb    
</pre></td></tr>
</table>
<p class="secthead"><a name="_sect7">Letzte Schritte: Grundlegende Einstellungen (einschließlich des Tastaturlayouts) </a></p>
<a name="doc_pre40"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 40: Grundlegende Einstellungen</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
# <font class="input">nano -w /etc/rc.conf</font>
</pre></td></tr>
</table>
<p>
Folgen Sie den Anleitungen in der Datei, um die Einstellungen anzupassen.
Jeder Anwender sollte sicherstellen, dass der <font class="code">CLOCK</font> Eintrag, 
entsprechend den persönlichen Vorlieben eingestellt ist. Das 
Tastaturlayout kann über die <font class="code">KEYMAP</font> Variable angepasst werden
(in <font class="path">/usr/share/keymaps</font> finden Sie verschiedene Möglichkeiten).
</p>
<p class="secthead"><a name="_sect8">Letzte Schritte: GRUB konfigurieren </a></p>
<p>
Ein kritischer Punkt im Umgang mit GRUB, ist zu verstehen, wie GRUB Festplatten 
und Partitionen referenziert. Ihre Linux Partition <font class="path">/dev/hda1</font> wird
von GRUB als <font class="path">(hd0,0)</font> angesprochen. Beachten Sie bitte die Klammer, um 
hd0,0 - sie ist <font class="input">wichtig</font>. Festplatten werden mit 0 anstatt mit &quot;a&quot; beginnend 
hochgezählt und auch die Partitionen starten mit 0 und nicht mit 1.
So wird aus <font class="path">/dev/hdb3</font> <font class="path">(hd1,2)</font> und aus <font class="path">/dev/hdd7</font>
wird <font class="path">(hd3,6)</font>. Nachdem Sie ein Gefühl dafür bekommen haben, notieren
Sie sich die Gerätenamen der &quot;root&quot; und &quot;boot&quot; Partitionen im GRUB Format.
Jetzt können Sie GRUB installieren.
</p>
<p>
Der einfachste Weg, GRUB zu installieren, ist <font class="code">grub</font> am Prompt Ihrer &quot;chrooted&quot; Shell 
einzutippen:</p>
<a name="doc_pre41"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 41</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
# <font class="input">grub</font>
</pre></td></tr>
</table>
<p>
Sie werden nun vom <font class="code">grub&gt;</font> Prompt und der GRUB Kommandozeile begrüßt.
Sie müssen nun die passenden Kommandos eingeben, um den GRUB &quot;Bootloader&quot;
auf Ihrer Festplatte zu installieren. In der Beispielkonfiguration wird GRUB
im &quot;Master Boot Record (MBR)&quot; der Festplatte installiert. In diesem Fall
geben Sie folgende Kommandos am GRUB Prompt ein:
</p>

<a name="doc_pre42"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 42</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>grub&gt; <font class="input">root (hd0,0)</font>
grub&gt; <font class="input">setup (hd0)</font>
grub&gt; <font class="input">quit</font>
</pre></td></tr>
</table>

<p>Was genau tun die zwei Befehle? Mit dem <font class="code">root ( )</font> Kommando bekommt
GRUB die Position Ihrer Bootpartition mitgeteilt (in diesem Beispiel <font class="path">/dev/hda1</font>
oder besser <font class="path">(hd0,0)</font>, um bei der GRUB Terminologie zu bleiben).
Der zweite Befehl <font class="code">setup ( )</font> bestimmt, wohin GRUB den Bootloader schreiben soll.
Dieser wird dann so konfiguriert, dass er seine speziellen Dateien auf der mit dem  
<font class="code">root ( )</font> Kommando vorgegebenen Partition sucht. In diesem Beispiel soll der 
Bootloader im MBR (Master Boot Record) der Festplatte installiert werden. In diesem Fall 
kann einfach<font class="path">/dev/hda</font> oder besser <font class="path">(hd0)</font> als Position angegeben werden.
Soll GRUB als sekundärer Bootloader installiert werden, wird er einfach in den
Bootrecord der entsprechen Partition geschrieben. 
Wenn GRUB den Bootrecord erzeugt hat, können Sie GRUB durch eingeben des Befehls
<font class="code">quit</font> beenden. Jetzt ist Gentoo Linux installiert. Es muss nur noch die
Datei <font class="path">/boot/grub/menu.lst</font> so angepasst werden, das GRUB beim Booten
ein nettes Bootmenü anzeigt.</p>
 
<p>Erzeugen Sie die Datei <font class="path">/boot/grub/menu.lst</font> (<font class="code">nano -w /boot/grub/menu.lst</font>), und
tragen Sie folgendes ein:</p>
<a name="doc_pre43"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 43</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
default 0
timeout 30
splashimage=(hd0,0)/boot/grub/splash.xpm.gz

title=Gentoo Linux
root (hd0,0) 
kernel /boot/bzImage root=/dev/hda3 

<font class="comment"># Der folgende Eintrag wird nur bei Dual-Boot benötigt</font>
title=Windows NT Workstation
root (hd0,5) 
chainloader +1
</pre></td></tr>
</table>
<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#bbffbb"><p class="note">
<b>Anmerkung: </b>
Die Dateiendung von <font class="path">menu.lst</font> muß &quot;lst&quot; (&quot;list&quot;) lauten, nicht &quot;1st&quot; (&quot;first&quot;).
Außerdem dürfen innerhalb der (hd0,0) Klammer keine Leerzeichen sein.
</p></td></tr></table>

<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#ffffbb"><p class="note">
<b>Wichtig: </b>Wenn Sie beim Konfigurieren des Kernels, die SCSI Emulation aktiviert haben, müssen Sie
zusätzlich noch die Option &quot;hdx=ide-scsi&quot; (&quot;hdx&quot; steht dabei für das Gerät Ihres CD Brenners)
an das <font class="code">kernel</font> Kommand anhängen.</p></td></tr></table>

<p>Wenn Sie die Datei gespeichert haben, sind Sie mit der Gentoo Linux Installation fertig.
Die erste Option wird GRUB dazu veranlassen, Gentoo Linux zu booten. Der zweite Eintrag ist
optional und bootet eine bootfähige Windows Partition.</p> 

<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#bbffbb"><p class="note">
<b>Anmerkung: </b>
In dem obigen Beispiel zeigt <font class="path">(hd0,0)</font> auf die &quot;boot&quot; Partition
(also <font class="path">/dev/hda1</font>) und <font class="path">/dev/hda3</font> ist die &quot;root&quot; Partition.
Die Partition <font class="path">(hd0,5)</font> enthält den Windows NT Bootloader.
</p></td></tr></table>

<p>Wenn Sie den Kernel mit zusätzlichen Optionen laden wollen, können diese
einfach durch Anhängen an das <font class="code">kernel</font> Kommando übergeben werden.
Momentan wird bereits eine Option (<font class="code">root=/dev/hda3</font>) übergeben,
aber es können durchaus weitere angehängt werden. Insbesondere können Sie
devfs abschalten (nicht zu empfehlen, außer Sie wissen genau, was Sie tun),
in dem Sie die Option <font class="code">gentoo=nodevfs</font> an das <font class="code">kernel</font> Kommando
hängen.

<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#bbffbb"><p class="note">
<b>Anmerkung: </b>Anders als in früheren Versionen von Gentoo Linux, muss die Option
<font class="code">devfs=mount</font> nicht mehr übergeben werden um devfs zu aktivieren. Seit 
-rc6 wird devfs automatisch gemountet.</p></td></tr></table>
</p>

<p class="chaphead">
<font class="chapnum"><a name="doc_chap17">17.</a></font>Installation abgeschlossen!</p>
<p>Gentoo Linux ist installiert. Der letzte verbleibende Schritt ist, die &quot;chroot&quot; Umgebung 
zu verlassen und alle Partitionen vor einem Reboot sauber herunterzufahren:</p>
<a name="doc_pre44"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 44</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
# <font class="input">exit</font> 
<font class="comment">// Dies beendet die &quot;chrootet&quot; Shell. Sie können auch ^D eingeben.</font>
# <font class="input">cd / </font>
# <font class="input">umount /mnt/gentoo/boot</font>
# <font class="input">umount /mnt/gentoo/proc</font>
# <font class="input">umount /mnt/gentoo</font>
# <font class="input">reboot</font>
</pre></td></tr>
</table>

<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#bbffbb"><p class="note">
<b>Anmerkung: </b>
Nach dem ersten Reboot ist es eine gute Idee ein <font class="code">update-modules</font> laufen zu lassen,
um die Datei <font class="path">/etc/modules.conf</font> zu erzeugen. Anstatt diese Datei direkt
zu bearbeiten, sollten Sie Änderungen nur an den Dateien in <font class="path">/etc/modules.d</font>
vornehmen, die dann zu einer <font class="path">/etc/modules.conf</font> zusammengefügt wird.
</p></td></tr></table> 

<p>Wenn Sie Fragen zum Thema Gentoo Linux haben, oder bei Entwicklung von Gentoo Linux 
mithelfen möchten, tragen Sie sich doch in die Mailing Listen &quot;gentoo-user&quot; und 
&quot;gentoo-dev&quot; ein. (Es gibt einen &quot;click to subscribe&quot; Link auf der 
<a href="http://www.gentoo.org">Gentoo Linux Homepage</a>). Zusätzlich haben wir
noch eine <a href="/doc/desktop.html">Desktop Konfigurationsanleitung</a>, die
Sie bei der weitergehenden Konfiguration von Gentoo Linux unterstützt und ein
nützliches  <a href="/doc/portage-user.html">Portage Handbuch</a>, das mit den
Grundlagen von Portage vertraut macht.   Herzlich Willkommen und viel Spaß mit Gentoo Linux!</p>

<br><br>
</td>
<td width="1%" bgcolor="#dddaec" valign="top"><table border="0" cellspacing="5" cellpadding="0">
<tr><td><img src="http://www.ibiblio.org/gentoo/images/line.gif"></td></tr>
<tr><td align="center" class="alttext">
						letzte Änderung 19 Juli 2002</td></tr>
<tr><td><img src="http://www.ibiblio.org/gentoo/images/line.gif"></td></tr>
<tr><td class="alttext">
<b><a class="altlink" href="mailto:drobbins@gentoo.org">Daniel Robbins</a></b><br><i>Chief Architect</i><br><br>Chris Houser<br><i>Author</i><br><br><b><a class="altlink" href="mailto:jerry@gentoo.org">Jerry Alexandratos</a></b><br><i>Author</i><br><br><b><a class="altlink" href="mailto:g2boojum@gentoo.org">Grant Goodyear</a></b><br><i>Ghost</i><br><br><b><a class="altlink" href="mailto:mgreiner@berlios.de">Markus Greiner</a></b><br><i>Übersetzer</i><br><br>
</td></tr>
<tr><td><img src="http://www.ibiblio.org/gentoo/images/line.gif"></td></tr>
<tr><td class="alttext">
<b>Zusammenfassung:</b> Diese Anleitung führt Sie schrittweise durch den Gentoo Linux 1.2 Installationsprozess 
für die x86 Prozessorarchitektur (AMD, Intel). Die Gentoo Linux Installation unterstützt 
verschiedene Installationsarten, abhängig davon wieviel des Systems von Grund auf installiert werden soll.
</td></tr>
<tr><td><img src="http://www.ibiblio.org/gentoo/images/line.gif"></td></tr>
</table></td>
</tr></table></td></tr>
<tr><td align="right" class="infohead" width="100%" bgcolor="#7a5ada">
			Fragen, Kommentare, Korretkuren?  Email <a class="highlight" href="mailto:gentoo-deutsch-dev@lists.berlios.de">gentoo-deutsch-dev@lists.berlios.de</a>.
			</td></tr>
</table></body>
</html>
