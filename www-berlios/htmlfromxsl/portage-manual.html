<html>
<head>
<meta content="text/html; charset=iso-8859-15" http-equiv="Content-Type">
<link title="new" rel="stylesheet" href="http://www.gentoo.org/main-new.css" type="text/css">
<link REL="shortcut icon" HREF="http://www.gentoo.org/favicon.ico" TYPE="image/x-icon">
<title>Gentoo Linux 
	
		Dokumentation
	
-- 
	Portage Handbuch</title>
</head>
<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" bgcolor="#ffffff"><table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td valign="top" height="125" bgcolor="#45347b"><table cellspacing="0" cellpadding="0" border="0" width="193">
<tr><td class="logobg" valign="top" align="center" height="88"><a href="/index.html"><img border="0" src="http://www.ibiblio.org/gentoo/images/gtop-s.jpg"></a></td></tr>
<tr><td class="logobg" valign="top" align="center" height="36"><a href="/index.html"><img border="0" src="http://www.ibiblio.org/gentoo/images/gbot-s.gif"></a></td></tr>
</table></td></tr>
<tr><td valign="top" align="right" bgcolor="#ffffff"><table border="0" cellspacing="0" cellpadding="0" width="100%"><tr>
<td width="99%" class="content" valign="top" align="left">
<br><p class="dochead">Portage Handbuch</p>
<form>
<b>Inhalt</b>:
	<select name="url" size="1" OnChange="location.href=form.url.options[form.url.selectedIndex].value" style="font-family:Arial,Helvetica, sans-serif; font-size:10"><option value="#doc_chap1">1. Portage: Ein Überblick</option>
<option value="#doc_chap2">2. Portage konfigurieren</option>
<option value="#doc_chap3">3. Paketmanagement</option></select>
</form>
<p class="chaphead">
<font class="chapnum"><a name="doc_chap1">1.</a></font>Portage: Ein Überblick</p>
<p class="secthead"><a name="_sect1">Überblick </a></p>
	<p>
        Portage ist ein sehr mächtiges und fortgeschrittenes Paket-Management-System.
        Seine Flexibilität und Fähigkeit als einfaches Werkzeug zum Kompilieren
        von Software oder als Herzstück einer brandaktuellen Linux Distribution 
        zu dienen ist nahezu einzigartig. Die Gentoo Linux Distribution wurde um 
        Portage entwickelt.
	</p>
	<p>
        Gentoo Linux wird oftmals als &quot;Meta-Distribution&quot; bezeichnet. Gentoo 
        besteht aus Portage und über 2200 Anleitungen zum Kompilieren von Paketen,
        sogenannten <font class="input">ebuilds</font>. Diese <font class="input">ebuilds</font> geben Portage die 
        Anweisungen wie ein bestimmtes Softwarepaket kompiliert und installiert 
        werden soll. Durch die Benutzung von <font class="input">Profilen</font> und dem Kommandozeilen 
        Programm <font class="input">emerge</font> können Benutzer und Entwickler Portage dazu nutzen 
        um die Pakete zu installieren und zu pflegen, die die Grundlage des Betriebssystems 
        und der darauf laufenden Anwendungen darstellen.
	</p>
	<p>
        Ein Gentoo Linux wird &quot;on-the-fly&quot; kompiliert, d.h. direkt auf den entsprechenden 
        Rechner angepasst und erstellt. Der Installationsprozess umfasst das Erstellen eines 
        funktionierenden Compilers sowie einer minimalen Umgebung, in der Portage Quelltexte
        aus dem Internet laden kann, um den Rest des &quot;Systemkerns&quot; und etwaige Anwendungen zu
        installieren. Auch wenn Portage die Benutzung von vorkompilierten Anwendungen 
        unterstützt, stellt diese nur einen Kompromiss dar und wird nur zur Installation 
        auf langsamen Maschinen bzw. von Entwicklern die schnell ein bestimmtes Paket 
        wiederherstellen wollen verwendet. Desweiteren gibt es einem die Møglichkeit, 
        Pakete auf einer schnellen Maschine 
        zu kompilieren um sie dann auf einem langsamen Rechner zu installieren.
	</p>
	<p>
        Durch das Kompilieren &quot;on-the-fly&quot; und der Tatsache, dass Portage stark konfigurierbar 
        ist sind nur sehr wenige Gentoo Installationen gleich. Im Grunde wird bei der 
        Installation von Gentoo Linux eine angepasste Linux Distribution erstellt, die sich 
        an den Optionen, wie sie in der Portage Konfiguration und den ebuilds selber definiert 
        sind, orientiert.
	</p>	
	<p>
        Auf den ersten Blick mag die Idee hinter Portage ähnlich dem BSD Ports System sein.
        Beide kompilieren Pakete aus dem Source und erlauben es dem Benutzer Software sicher 
        zu installieren bzw. zu deinstallieren. Beide lösen Abhängigkeiten automatisch auf. 
        Viele Ideen von Portage wurden beim BSD Ports System ausgeliehen, jedoch handelt es 
        sich bei Portage definitiv nicht um eine weitere &quot;Ports-Kopie&quot;.
	</p>
	<p>
        Das Portage System ist eine Verbindung aus einem auf Python basierenden Kern und 
        Bash Script basierten <font class="input">ebuilds</font>. Anstatt mit Makefiles und dem <font class="input">make</font> 
        Kommando zu hantieren, verbindet Portage die Möglichkeiten von Python und das 
        einfach zu handhabende Shellscripting mit einigen objektbasierten Charakteren, um 
        ein einzigartig mächtiges System zu erstellen. Dieses setzt Portage an die Spitze aller 
        aktuellen Ports Systeme.
	</p>
	<p>
        Einige der von Portage angebotenen erweiterten Funktionen sind die Möglichkeit 
        verschiedene Versionen und Überarbeitungen des gleichen Pakets im Tree zu halten, 
        Auflösung der entsprechenden Abhängigkeiten, feinstrukturiertes Paketmanagement, 
        sichere Installation via Sandbox, Schutz von bestehenden Konfigurationsdateien, 
        Profile und vieles mehr. Viele dieser Funktionen werden noch im Laufe dieses 
        Handbuches genauer erläutert.
	</p>
  <p class="secthead"><a name="_sect2">Umgebungsabhängige Auflösung von Abhängigkeiten und Funktions Unterstützung </a></p>
	<p>
        Das Portage System ist im Hinblick der Flexibilität welches es dem User bietet 
        einzigartig. Traditionelle BSD Ports Systeme tendieren dazu nur jeweils eine 
        Version eines jeden Paketes im Tree zu unterstützen. Portage hat diese Begrenzungen
        nicht. Es können mehrere Versionen eines Paketes zur Installation zur Verfügung 
        stehen.Paketabhängigkeiten (Pakete, die zum Kompilieren andere Pakete nötig sind) 
        können entweder mit ihrem Namen oder mittels Namen mit zusätzlich angehängter 
        Versionsnummer definiert werden. Das ermöglicht es mehrere Versionen eines Paketes 
        zeitgleich im Tree zu pflegen.
	</p>
	<p>
        Das Abhängigkeits-System unterstützt ebenfalls umgebungsabhängige Abhängigkeiten. 
        Portage hat dafür ein leistungsstarkes Konzept, die sogenannten <font class="input">USE Settings</font>. 
        Durch das ändern einer Konfigurations-Variablen in einer Portage Konfiguration, ist 
        es möglich bestimmte Unterstützung für Funktionen oder Bibliotheken während des 
        Kompilierens zu aktivieren bzw. abzuschalten. Dies ist ein sehr flexibles und 
        leistungsstarkes System, welchem wir uns im nächsten Kapitel widmen werden.
	</p>
	<p>
        Zusätzlich unterstützt Portage Konzept der <font class="input">SLOTs</font>. Während der Entwicklung von 
        Gentoo Linux wurde klar, daß wir öfters mehrere Versionen bestimmter Pakete (wie 
        z.B. Bibliotheken) benötigen, um die Ansprüche andere Pakete zu erfüllen. Der
        traditionelle Weg um dieses Problem zu lösen war es, verschiedene Versionen eines 
        Paketes als unterschiedliche Pakete mit leicht abweichenden Namen zu behandeln.
        </p>
	<p>
        Anstatt verschiedene Versionen als eigene Pakete zu behandeln, brachten die Entwickler 
        Portage bei, wie mehrere Versionen eines Paketes gleichzeitig durch Benutztung von 
        <font class="input">SLOTs</font> zu handhaben sind. Als Beispiel sei hier die gängige Freetype Bibliothek 
        genannt. Die 1.x Reihe von Freetype ist mit der 2.x Reihe inkompatibel, jedoch sind 
        oftmals beide Versionen nötig, um die Abhängigkeiten verschiedener Pakete zu erfüllen. 
        Die meisten Distributionen und Ports Systeme tendieren dazu, ein &quot;freetype&quot; Paket für 
        Freetype 1.x und ein &quot;freetype2&quot; Paket für Freetype 2.x zu führen. Dies betrachten wir 
        als beinahe komplett beschädigtes Paketmanagement System. Wir ergänzen einfach die 
        <font class="input">SLOT</font> Nummer 1 zur ersten und Nummer 2 zur zweiten Version. Mit dieser 
        Information ist Portage in der Lage beide Reihen zu pflegen und, falls nötig, beide auf 
        höhere Versionen upzudaten.
	</p>
<p class="secthead"><a name="_sect3">Profile </a></p>

	<p>
        Portage unterstützt ein weiteres Konzept, sogenannte <font class="input">Profile</font>. Ein Profil enthält 
        eine Liste von Paketnamen und Versionen mit Anweisungen und einigen Standardoptionen, 
        welche von Portage benutzt werden sollen. Ein Profil enthält Informationen welche Pakete 
        und welche Versionen jeweils erlaubt bzw. verboten oder als zwingend notwendig behandelt werden 
        sollen. Der Benutzer kann zwischen verschiedenen Profilen wechseln in dem er einfach 
        einen Symlink ändert (<font class="input">/etc/make.profile</font>).
	</p>
	<p>
        Der gesamte Aufwand, welcher bei der Entwicklung von Gentoo Linux betrieben wurde, 
        resultiert in einer Sammlung von <font class="input">ebuilds</font> und einem Profil. Dieses Profil 
        beschreibt welche Pakete als Kernpakete für den Betrieb des Systems wichtig sind.
        Das Profil erlaubt darüber hinaus den Entwicklern bestimmte Pakete zu blockieren bzw.
        freizuschalten. Dies ist auch nützlich um defekte Pakete zwischenzeitlich zu deaktivieren.
        Die <font class="input">ebuild</font> Dateien definieren einfach nur wie bestimmte Pakete von Portage 
        kompiliert und installiert werden sollen, welche durch das Profil verlangt bzw. 
        erlaubt werden.
	</p>
	
<p class="chaphead">
<font class="chapnum"><a name="doc_chap2">2.</a></font>Portage konfigurieren</p>
<p class="secthead"><a name="_sect1">Überblick </a></p>
	<p>
        Das folgende Kapitel soll verschiedene Aspekte von Portage abdecken, die jeweils für 
        Benutzer wie Entwickler wichtig sind. Portage ist ein sehr flexibles System und Sie
        müssen verstehen, wie man Portage richtig konfiguriert, um Ihr System genau auf Ihre
        Bedürfnisse abstimmen zu können.
	</p>
	<p>
        Bitte beachten Sie, dass in diesem Dokument der Begriff &quot;Benutzer&quot; Personen mit
        administrativen Rechten definiert. Um die Portage Konfiguration zu ändern und neue
        Pakete zu installieren bzw. zu entfernen benötigen Sie Root-Rechte.
	</p>
<p class="secthead"><a name="_sect2">Portage Konfigurations Dateien </a></p>
	<p>
	Fast alle Konfigurations-Optionen, die weiter unten erklärt werden,
	befinden sich in den Dateien /etc/make.conf und /etc/make.global.
	Es ist wichtig zu wissen, das alle Einstellungen, die in /etc/make.conf
	definiert sind, von den Einstellungen, die in /etc/make.global gemacht
	wurden, fast immer überschrieben werden.
	
	Alle Einstellungen in /etc/make.conf und /etc/make.global können als
	Global betrachtet werden, solang es Portage betrifft.
	</p>
	<p>

	Wenn Sie überprüfen wollen, ob eine Option bereits definiert
	wurde, ist es zu empfehlen, dass Sie zuerst /etc/make.conf überprüfen
	und erst dannach die /etc/make.global. Sofern nicht anders angegeben, werden
	Optionen, die in /etc/make.globals definiert wurden, von den Optionen in
	/etc/make.conf überschrieben.
	
	</p>
<p class="secthead"><a name="_sect3">USE Einstellungen </a></p>
  	<p>
	Das USE-System ist eine flexible Möglichkeit, um sämtliche
	Features, die von Anfang an beim Kompilierprozess von Gentoo Linux
	dabei oder erst hinzugekommen sind, ein- bzw. auszuschalten.
	Dies erlaubt eine Administrierbarkeit, wie die Pakete in Verbindung
	mit den angegebenen Features in der USE-Variable, kompiliert werden.
	Zum Beispiel, wenn ein Paket GNOME Support hat, können Sie diesen
	Support abschalten, indem Sie in der USE-Variable <font class="input">-gnome</font> angeben. 
        Wenn Sie jedoch den Support für die Software, die GNOME
	unterstützt, aktivieren wollen, dann setzen Sie in der USE-Variable
	ein <font class="input">gnome</font> ein.
	</p>
	<p>Der Effekt der USE Einstellungen auf Pakete ist abhängig davon,
	ob die Software und das ebuild Paket selbst, das jeweils gesetzte USE
	Feature optional unterstützt. Wenn dem nicht so ist, so wirkt auch
	das jeweilige USE Feature nicht auf diese Software. Auch werden einige 
        Paketabhängigkeiten bei mancher Software nicht als optional angesehen,  
        dadurch haben gesetzte USE Einstellungen keine Auswirkungen auf diese 
        vorgeschriebenen Abhängigkeiten. Eine Liste der USE Einstellungen, die von 
        einem Paket benutzt werden, können in der entsprechenden Ebuild Datei in 
        den Zeilen <font class="input">DEPEND</font> und <font class="input">RDEPEND</font> eingesehen werden.
	</p>
	<p>Eine Liste der USE Einstellungen, die von Gentoo Linux benutzt
	werden, können Sie aus der Datei <font class="input">/usr/portage/profiles/use.desc</font>
	beziehen. Jede USE Einstellung ist jeweils in einer Zeile mit einer
	zusätzlichen Beschreibung deklariert und erklärt, was
	Sie für ein Feature aktiviert.
	</p>

	<p>
	Portage bestimmt, welche USE Einstellung ein- bzw. ausgeschaltet ist,
	aufgrund einer überprüfung von bis zu vier verschiedenen Stellen,
	wo USE definiert sein kann. Diese Stellen bewirken, dass die USE
	Einstellungen, die an diesen Stellen definiert sind, &quot;aufgestapelt&quot; werden.
	Es durchforstet jede einzelne Stelle und merkt sich jedes USE Feature der
	früheren Stellen, ob Sie ein- bzw. ausgeschaltet sind und fügt
	neu gefundene Features hinzu, so dass es eine lange USE Einstellung
	ergibt.
	Wird zum Beispiel ein Feature an einer früheren Stelle abgeschaltet
	und am der aktuellen Stelle, die Portage durchforstet, eingeschaltet, so wird
	das Feature trotz Abschaltens an der früheren Stelle wieder eingeschaltet.
	</p>

         

	<p>
	Portage überprüft die Stellen in denen USE Einstellungs definiert werden 
        in der Reihenfolge, wie sie in der Variable <font class="input">USE_ORDER</font> in
	/etc/make.globals angegeben ist. Möchten Sie eine Stelle ausschalten,
	dann entfernen Sie einfach jene in <font class="input">USE_ORDER</font>.
	</p>
	<p>
	Die folgenden Absätze beschreiben jeden Ort, der in <font class="input">USE_ORDER</font>
	von der Portages Standard Konfiguration definiert wurde.
	</p>
	
	
	<p><b>Defaults</b></p>
	<p>Portage Profile können einen Satz von standard USE Features
	beinhalten. Diese standard Features sind bei jedem Profil dabei und
	werden in der Datei make.defaults angegeben. Da /etc/make.profile
        als eine Verknüpfung zum aktuell benutzten Portage Profil fungiert,
	ist der Satz der standard USE Features des aktuellen Profils
	die Datei /etc/make.profile/make.defaults. Es ist nicht zu empfehlen,
	diese Datei zu bearbeiten aufgrund von zukünftige Profiländerungen,
	die diese überschreiben würde.
	</p>
	
	<p><b>Auto</b></p>
	<p>Diese Pakete sind in der Datei use.defaults im Portage Profil
	(/etc/make.profile/use.defaults) definiert. Jeder Eintrag beinhaltet
	eine USE Feature Bezeichnung und das dazugehörende Paket.
	Wenn jenes Paket als USE Feature angegeben wurde, was bereits installiert
	ist, wird es als eingeschaltet betrachtet. 
        Wenn Sie zum Beispiel das Paket <font class="input">x11-base/xfree</font> installieren und die USE-Option <font class="input">X</font>
        nicht abschalten, so wird diese solange global eingeschaltet, wie das Paket installiert ist.
        Es ist nicht zu empfehlen, diese Datei zu bearbeiten
	aufgrund von zukünftigen Profiländerungen, die diese überschreiben
	würden.</p>

	<p><b>Conf</b></p>
	<p>Wenn eine <font class="input">USE</font> Option in /etc/make.conf definiert ist, werden
	die USE Features, die in jener Option angegeben wurden, inkludiert.
	Wenn es keine <font class="input">USE</font> Option in make.conf gibt, dann wird /etc/make.globals
	überprüft. Solch ein Eintrag könnte wie folgt aussehen:
	</p>

	<a name="doc_pre1"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 1</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
USE=&quot;slang readline gpm berkdb gdbm tcpd pam libwww ssl gb tk
     lm_sensors lvm ldap tex bonobo sdl gtk xfs evo pda ldap
     mmx mitshm perl python guile ruby postgres dvd 3dnow tcl
     lcms gif sdl vorbis ogg oss libg++ directfb decss snmp
     gnome X opengl mozilla pdflib gpg -nls gd xface jpilot
     -kde -qt -esd -motif -alsa oggvorbis&quot;
	</pre></td></tr>
</table>

	<p>
	USE Features werden eingeschaltet, indem Sie einfach in der USE-Variable
	angegeben werden. USE Features können jedoch auch mittels 
        Negation durch ein <font class="input">-</font> (Minus) vor dem Feature-Namen deaktiviert werden.
        Zum Beispiel schaltet <font class="input">gnome</font> GNOME Support ein, während <font class="input">-motif</font> den MOTIF Support
	abschaltet.
	</p>
	<p>
	Die <font class="input">USE</font> Option in /etc/make.conf ist der empfohlene Ort, wo man
	USE Features ein- bzw. ausschalten sollte. Diese Datei wird nicht
	automatisch von Portage überschrieben. Es wird empfohlen, dass Sie hier 
        die USE Einstellungen eintragen, die nicht von den vorangehenden Stellen ein bzw. 
        ausgeschaltet werden sollen. 
	</p>
	
	<p><b>Env</b></p>
	<p>Die USE Features kann man von Hand aus mit seiner eigenen Shell
	Umgebungseinstellung überschreiben.
	</p>

	<a name="doc_pre2"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 2</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
export USE=&quot;-gnome&quot;
emerge net-im/gaim
	</pre></td></tr>
</table>

	<p>Dies erlaubt über kurz oder lang, das man spezifische
	Pakete ohne oder mit einem/mehrere USE Feature/s kompilieren kann.
	Diese von Ihnen per Hand überschriebenen USE Features bleiben
	bestehen, solange Sie in jener Shell Umgebung damit arbeiten.
	Verlassen Sie Ihre Umgebung (&quot;exit&quot;), ist auch das von Hand gesetzte USE Feature weg.
	</p>
	<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#bbffbb"><p class="note">
<b>Anmerkung: </b>
        Auch wenn Portage die aktuellen USE Einstellungen zum Zeitpunkt der 
        Installation des Pakets speichert, so sind diese Einstellungen nicht 
        dauerhaft gespeichert. Sollte dieses Paket in der Zukunft erneut installiert 
        bzw. aktualisiert werden, wird nur die aktuell im System definierte USE Einstellung 
        angewendet und keinesfalls die zum Zeitpunkt der Erstinstallation geltende.</p></td></tr></table>

  <p class="secthead"><a name="_sect4">Compiler Optionen </a></p>
	<p>
        Die Compiler Optionen, welche von Portage zum kompilieren von Paketen genutzt 
        werden, können in /etc/make.conf gesetzt werden indem <font class="input">CHOST</font>, <font class="input">CFLAGS</font> 
        und <font class="input">CXXFLAGS</font> editiert werden. Die <font class="input">CHOST</font> Einstellung gibt an, auf 
        welcher Plattform Sie kompilieren. <font class="input">CFLAGS</font> und <font class="input">CXXFLAGS</font> geben 
        Compiler Einstellungen an während C bzw. C++ kompiliert wird.
	</p>
	<p>
        Es werden Ihnen einige kommentierte Standard Einstellungen für unterschiedliche
        Plattformen angeboten. Diese Einstellungen können als getestet und stabil angesehen 
        werden. Diese zu ändern, könnte zu Fehlern in der Software und dem Compiler 
        führen. Bitte seien Sie beim ändern der Standard Einstellung vorsichtig, da Sie 
        ein unbenutzbares bzw. beschädigtes System erhalten könnten.
        </p>
	<p>
        Benutzer eines Multiprozessor Systems könnten einige Vorteile erhalten, indem sie in 
        /etc/make.globals die Option <font class="input">MAKEOPTS</font> editieren. Diese Option wird während des 
        Kompilierungsvorganges an <font class="input">make</font> übergeben um mehrere GCC Instanzen zu aktivieren.
	</p>
	
<p class="secthead"><a name="_sect5">Lage der Verzeichnisse </a></p>
	<p>
        Portage erlaubt es Ihnen zu bestimmen in welchen Verzeichnissen Pakete kompiliert 
        und verschiedene Dateien gespeichert werden sollen. Die meisten Benutzer werden 
        diese Optionen nicht benötigen. Folgende Optionen können genutzt werden:
        </p>

	<ul>
	<li>
<font class="input">PORTDIR</font> - Position des Portage Trees</li>
	<li>
<font class="input">DISTDIR</font> - Lokaler Cache der runtergeladenen Pakete</li>
	<li>
<font class="input">PKGDIR</font> - Ort der lokal erzeugten tbz2 Pakete</li>
	<li>
<font class="input">RPMDIR</font> - Ort der lokal erzeugten RPM Pakete</li>
	<li>
<font class="input">CURRENTFILE</font> - ???</li>
	<li>
<font class="input">PORTAGE_TMPDIR</font> - Kurzfristiger Platz zum Kompilieren der Pakete</li>
	<li>
<font class="input">BUILD_PREFIX</font> - Gehört zu PORTAGE_TMPDIR</li>
	<li>
<font class="input">PKG_TMPDIR</font> - Gehört zu PKG_TMPDIR</li>
	</ul>
<p class="secthead"><a name="_sect6">Schutz der Konfigurations Dateien </a></p>
	<p>
        Portage erlaubt den Schutz aller Konfigurations Dateien in bestimmten 
        Verzeichnissen. Portage wird in geschützten Verzeichnissen keine Dateien 
        überschreiben. Wenn ein Paket versucht, bereits existierende Dateien zu 
        überschreiben, wird die entsprechende Datei nach dem Muster
        <font class="input">._cfg0000_name</font> umbenannt. Dies geschieht damit der Benutzer später 
        die neue Datei einsehen kann, um die Unterschiede manuell einzufügen.
        </p>
	<p>
        Geschützte Verzeichnisse können über <font class="input">CONFIG_PROTECT</font> entweder in 
        /etc/make.conf oder /etc/make.globals definiert werden. Bestimmte Dateien 
        und Unterverzeichnisse unterhalb geschützter Verzeichnisse können durch
        <font class="input">CONFIG_PROTECT_MASK</font> vom Schutz ausgenommen werden.
	</p>
	<p>
        Das Folgende ist nur ein Beispiel und sollte nicht blind kopiert werden:
	</p>

<a name="doc_pre3"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 3</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
CONFIG_PROTECT=&quot;/etc /usr/share/config /usr/kde/2/share/config&quot;
CONFIG_PROTECT_MASK=&quot;/etc/gconf /etc/init.d /etc/pam.d&quot;
</pre></td></tr>
</table>

	<p>
        Benutzer können mehr Informationen über den Schutz von Konfigurations 
        Dateien erhalten, indem sie folgendes in ihrer Shell eingeben:
	</p>

<a name="doc_pre4"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 4</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
emerge --help config
</pre></td></tr>
</table>

<p class="secthead"><a name="_sect7">FUNKTIONEN </a></p>
	<p>
        Portage bietet eine ganze Menge Optionen, die auf Entwickler abzielen, 
        welche regeln wollen wie sich Portage verhält und nach der Installation 
        verschiedener Paketstufen aufräumt. Diese Optionen sollten nur für
        Entwickler interessant sein. Bei normalen Benutzern könnten sie Probleme 
        verursachen.
	</p>
	<p>
        Eine Liste an Funktionen kann unter <font class="input">FEATURES</font> entweder in 
        /etc/make.conf oder /etc/make.globals aktiviert werden. Hier eine Liste 
        der verfügbaren Funktionen:
        </p>
	<p>
	<ul>
	<li>
<font class="input">digest</font> : Erstellt automatisch einen Digest für neue Ebuilds.</li>
	<li>
<font class="input">cvs</font> : Ergänzt neue Ebuild Digests automatisch ins CVS.</li>
	<li>
<font class="input">sandbox</font> : Aktiviert das Sandboxverfahren.</li>
	<li>
<font class="input">noclean</font> : Portage räumt nach dem kompilieren nicht auf.</li>
	<li>
<font class="input">noauto</font> : Führt keine wichtigen Ebuild Schritte automatisch aus.</li>
	</ul>
	</p>
<p class="secthead"><a name="_sect8">Portage SYNC Einstellungen </a></p>
	<p>Portage bietet zwei verschiedenen Arten, den Portage Tree zu erneuern: 
        rsync oder anonymous CVS. Sie können
	angeben, welche Methode Portage benutzen soll, um das update
	durchzuführen. Jene Methode können Sie über die <font class="input">SYNC</font>
	Option, die sich in der Datei /etc/make.conf befindet, angeben.
	</p>

	<p><b>RSYNC</b></p>

	<p>Es wird empfohlen, die rsync-Methode zu benutzen, es sei denn Sie
	planen, Ihre eigenen Ebuilds zu entwickeln. Diese entlastet unsere
	Server deutlich - im Gegensatz zu Anonymous CVS.
	Deshalb ist rsync die Standardmethode, welche in /etc/make.conf
	angegeben wurde.
	Sie können sie folgendermaßen angeben:
	</p>

<a name="doc_pre5"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 5</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
SYNC=&quot;rsync://cvs.gentoo.org/gentoo-x86-portage&quot;
</pre></td></tr>
</table>

	<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#bbffbb"><p class="note">
<b>Anmerkung: </b>
        Die rsync-Methode überschreibt blind alle Veränderungen, die an Ihrem 
        lokalen Portage Tree vorgenommen wurden. Falls Sie lokale Änderungen 
        behalten möchten, müssen Sie die Anonymous CVS Methode wählen.
        </p></td></tr></table>

	<p><b>Anonymous CVS</b></p>

	<p>
        Portage kann den lokalen Portage Tree mit einem bestimmten anonymen CVS 
        Server abgleichen. Dies ist besonders für Entwickler sinnvoll, die verhindern 
        wollen, dass Ihre Veränderungen am Portage Tree beim Abgleichen überschrieben 
        werden. Diese Methode kann folgendermaßen aktiviert werden:
        </p>

<a name="doc_pre6"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 6</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
SYNC=&quot;cvs://:pserver:anonymous@gentoo.org:/home/anoncvs&quot;
</pre></td></tr>
</table>

	<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#bbffbb"><p class="note">
<b>Anmerkung: </b>Anonymous CVS ist langsam und sehr ressourcenintensiv - sowohl für
	den Server als auch für den Client (lokal). Wir möchten
	Sie darum bitten, das Sie die rsync Methode verwenden, wenn Sie keine
	Änderungen im lokalen Portage Tree vornehmen wollen.
	</p></td></tr></table>

	<p>Bevor Sie beginnen Anonymous CVS zu benutzen, um Ihre lokale
	Kopie mit einem offiziellen Portage Tree zu synchronisieren, müssen
	Sie zuerst den neuesten	Tree mittels <font class="code">cvs</font> durch folgende Vorgehensweise herunterladen (&quot;checkout&quot;):
	</p>
<a name="doc_pre7"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 7</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
# Sichern des alten Portage Trees
cd /usr
mv portage portage.old

# Herunterladen (&quot;checkout&quot;) des Trees
cvs -d :pserver:anonymous@gentoo.org:/home/anoncvs login
# Betätigen Sie einfach Enter bei der Passwortabfrage
cvs -d :pserver:anonymous@gentoo.org:/home/anoncvs co gentoo-x86

# Verschieben Sie den neuen Tree zur gewohnten Stelle
mv gentoo-x86 portage
</pre></td></tr>
</table>

	<p><b>Entwickler CVS</b></p>

	<p>
        Entwickler mit vollem Zugang zum CVS können auch per <font class="input">emerge</font> den lokalen
        Tree mit dem CVS abgleichen lassen, welches sie mittels RSH oder SSH erreichen
        können.
	</p>
	<p>
	Laden Sie einfach den CVS Tree mittels Ihres Accounts herunter (&quot;checkout&quot;),
        verschieben Sie diesen nach /usr/portage und benutzen
	Sie folgende <font class="input">SYNC</font> Option:
	</p>

<a name="doc_pre8"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 8</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
SYNC=&quot;cvs://Ihr_account@cvs.gentoo.org:/home/cvsroot&quot;
</pre></td></tr>
</table>

<p class="secthead"><a name="_sect9">Spiegelungen (Mirrors) </a></p>
	<p>
        Das Gentoo Projekt beinhaltet eine lokale Spiegelung von allen
	Archivdateien, die als Ebuild im Portage Tree vorliegen. Meistens
	werden Source Tarballs usw. auf langsamen Servern gespeichert, die
        ziemlich oft ausfallen können. Auch Entwickler entfernen
	regelmässig alte Versionen Ihrer Software von FTP-Seiten,
	wenn neue Releases gemacht wurden. Um das Leben von Benutzer, die
	die Gentoo Distribution nutzen, zu erleichtern, spiegeln wir diese
	Dateien. Das erlaubt ein schnelleres und sicheres Herunterladen
	der Archivdateien von Spiegel-Servern, die näher an Ihrem
	Standort liegen.
	</p>
	<p>
	Wann auch immer Sie vorhaben, ein Paket herunterzuladen, indem Sie es
	&quot;mergen&quot;, versucht Portage zu allererst unseren Spiegel-Server
	für die angeforderten Archive zu erreichen . Wenn sich auf diesem
	Server die benötigten Dateien nicht befinden, versucht Portage
	den jeweiligen HTTP- oder FTP-Server, der im Ebuild Paket
	angegeben ist.
	</p>
	<p>
	Die Angabe des Spiegel-Server, welchen Portage benutzt, erfolgt
	in der <font class="input">GENTOO_MIRRORS</font> Option, die sich in der Datei /etc/make.conf
	befindet.

	Das Folgende ist die standard Einstellung:
	</p>
<a name="doc_pre9"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 9</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
GENTOO_MIRRORS=&quot;http://www.ibiblio.org/gentoo&quot;
</pre></td></tr>
</table>
	<p>Für einen Gentoo-Spiegel-Server in Ihrer Nähe,
	besuchen Sie die Gentoo Webseite oder fragen Sie in Ihrer Mailinglist
	nach einem für Sie günstigeren Server.
	</p>
<p class="secthead"><a name="_sect10">Download-Programm </a></p>
	<p>
        Das Programm, welches von Portage zum Download der benötigten Dateien 
        genutzt wird, kann durch die Optionen <font class="input">FETCHCOMMAND</font> und 
	<font class="input">RESUMECOMMAND</font> angegeben werden. Einige Beispiele werden in 
        /etc/make.conf und /etc/make.globals gezeigt. Als Standardprogramm verwendet 
        Portage wget, welches den meisten Anforderungen genügen sollte.
	</p>

	<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#bbffbb"><p class="note">
<b>Anmerkung: </b>
        Portage gibt Informationen über HTTP und FTP Proxies an das jeweilige 
        Download-Programm weiter, die in den HTTP_PROXY und FTP_PROXY Optionen 
        definiert sind.
        </p></td></tr></table>
<p class="secthead"><a name="_sect11">Proxies </a></p>
	<p>
        Portage kann angewiesen werden, zum Download HTTP oder FTP Proxies zu nutzen 
        Die Proxies können bei den Optionen <font class="input">HTTP_PROXY</font> und <font class="input">FTP_PROXY</font> 
        entweder in /etc/make.conf oder in /etc/make.globals angegeben werden. Auch hier 
        sollten die Einstellungen vorzugsweise in /etc/make.conf erfolgen. Wenn HTTP 
        und FTP über den gleichen Proxy erfolgen soll, können Sie auch einfach die 
        Option <font class="input">PROXY</font> nutzen.
        </p>
	
	<p>Im Folgenden ein Beispiel:</p>

<a name="doc_pre10"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 10</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
HTTP_PROXY=&quot;http://192.168.1.1:8080&quot;
FTP_PROXY=&quot;http://192.168.1.1:8080&quot;

or

PROXY=&quot;http://192.168.1.1:8080&quot;
</pre></td></tr>
</table>

	<p>
        Portage kann ebenfalls angewiesen werden einen HTTP Proxy zur Verwendung von 
        Rsync zu nutzen. Dies kann durch die Option <font class="input">RSYNC_PROXY</font> in 
        /etc/make.conf oder als Umgebungsvariable aktiviert werden
        </p>
	<p>
	Im Folgenden ein Beispiel:
	</p>

<a name="doc_pre11"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 11</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
RSYNC_PROXY=&quot;192.168.1.1:8080&quot;
</pre></td></tr>
</table>

	<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#bbffbb"><p class="note">
<b>Anmerkung: </b>
        Sollten Sie hinter einer Firewall sitzen und Rsync scheint Ihren HTTP 
        Proxy nicht nutzen zu können, können Sie Ihren Portage Tree durch einen 
        Snapshot Tarball updaten. Diesen können Sie von <a href="http://www.ibiblio.org/gentoo/snapshots/">http://www.ibiblio.org/gentoo/snapshots/</a> 
        herunterladen.
	</p></td></tr></table>

<p class="secthead"><a name="_sect12">Verschiedene Optionen </a></p>
	<p>Die folgenden Optionen können für einige Nutzer sinnvoll sein:</p>

	<ul>
	<li>
<font class="input">NOCOLOR</font> : Erlaubt es dem Benutzer, das Verwenden von Farben bei Ausgaben von emerge zu deaktivieren.</li>
	<li>
<font class="input">CLEAN_DELAY</font> : Dadurch verzögert Portage das Entfernen von Paketen, um Nutzern die Möglichkeit zum Abbruch zu geben. Diese Zeit kann hier angegeben werden. Um das Verzögern zu verhindern, sollte die Zeit auf &quot;0&quot; gestellt werden.</li>
	</ul>

<p class="chaphead">
<font class="chapnum"><a name="doc_chap3">3.</a></font>Paketmanagement</p>
<p class="secthead"><a name="_sect1">Updaten des Portage Trees </a></p>
	<p>
        Der Portage Tree, welcher in /usr/portage liegt, enthält die Bibliothek der 
        &quot;Bauanleitungen&quot; für verschiedene Pakete (sogenannte <font class="input">ebuilds</font>). Darüber 
        hinaus enthält der Tree auch noch Informationen aus dem Profil und der Datei 
        package.mask, welche wichtig sind, um das System aktuell zu halten. Um 
        immer die aktuellsten Versionen und neuesten Bugfixes zu haben, ist es wichtig 
        den Tree regelmäßig mit dem offiziellen Tree abzugleichen. Sie können den 
        Portage Tree mittels folgendem Kommando updaten:
	</p>
<a name="doc_pre12"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 12</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
emerge rsync
</pre></td></tr>
</table>
	<p>
        Die Methode, welche von Portage genutzt wird, kann geändert werden. Schauen Sie 
        unter <font class="input">Portage SYNC Einstellungen</font> im Kapitel <font class="input">Portage konfigurieren</font> 
        nach, um weitere Informationen zu erhalten.
	</p>
<p class="secthead"><a name="_sect2">Pakete installieren (mergen) </a></p>
	<p>
        Der Vorgang des Kompilierens und Installierens eines Paketes durch Portage wird 
        als <font class="input">mergen</font> bezeichnet. Portage kompiliert Pakete und installiert diese 
        kurzfristig in ein &quot;Abbild-Verzeichnis&quot;, in dem es die zu installierenden Dateien 
        aufzeichnet. Diese Dateien werden dann aus dem &quot;Abbild-Verzeichnis&quot; ins Root (/) 
        Dateisystem integriert (gemerged).
	</p>
	<p>
        Das <font class="input">emerge</font> Kommando dient als Front-End des Portage Systems. Das Installieren 
        und Entfernen von Paketen wird durch dieses Kommando und seine unzähligen Argumente 
        kontrolliert.
	</p>
	<p>
        Um die neueste, unmaskierte Version eines Paketes zu installieren, geben Sie einfach 
        den Paketnamen, wie folgt ein (Beispiel):
	</p>
<a name="doc_pre13"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 13</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
emerge galeon
</pre></td></tr>
</table>
	<p>
        Dieses Kommando wird zunächst alle benötigten Abhängigkeiten (bereits alle USE 
        Einstellungen berücksichtigt) und dann die neueste und unmaskierte Version von 
        Galeon kompilieren und installieren. Galeon könnte auch mit vollem qualifizierten 
        Namen inklusive Kategorie angegeben werden: <font class="input">net-www/galeon</font>
	</p>
	<p>
        Das <font class="input">emerge</font> Kommando akzeptiert auch die Angabe von direkten Ebuild Dateien. 
        Dies erlaubt dem Nutzer auch ältere Versionen einers bestimmten Paketes oder
        Ebuilds einer dritten Partei zu installieren. Das Folgende ist ein Beispiel:
	</p>
<a name="doc_pre14"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 14</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
emerge /usr/portage/net-www/galeon/galeon-1.2.0-r3.ebuild
</pre></td></tr>
</table>
	<p>

        Zusätzlich zum angeben eines Paketnamens oder einer Ebuild Datei, unterstützt 
        <font class="input">emerge</font> verschiedene weitere Argumente. Eines dieser Argumente ist 
        <font class="input">--pretend</font>, vielleicht eines der nützlichsten. Durch dieses Argument 
        wird das geplante Vorgehen nicht durchgeführt. Stattdessen gibt Portage eine 
        Liste aller zu installierenden Pakete aus. Das Folgende zeigt eine Auflistung 
        der Pakete, die während der Installation der neuesten Version des 
        Kdevelop Paketes installiert würden:
	</p>

<a name="doc_pre15"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 15</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
root@kodiak blocke # emerge --pretend kdevelop

These are the packages that I would merge, in order.

Calculating dependencies ...done!
[ebuild  N   ] kde-base/kdelibs-2.2.2-r4 to /
[ebuild  N   ] dev-util/kdbg-1.2.2 to /
[ebuild   U  ] app-text/psutils-1.17 to /
[ebuild   U  ] app-text/a2ps-4.13b-r3 to /
[ebuild   U  ] app-text/jadetex-2.20 to /
[ebuild  N   ] app-text/sgmltools-lite-3.0.3-r2 to /
[ebuild  N   ] kde-base/kdoc-2.2.2-r1 to /
[ebuild  N   ] net-www/htdig-3.1.5-r2 to /
[ebuild  N   ] app-text/enscript-1.6.3-r1 to /
[ebuild  N   ] kde-base/kdebase-2.2.2-r2 to /
[ebuild  N   ] app-doc/qt-docs-2.3.1 to /
[ebuild  N   ] dev-util/kdevelop-2.0.2 to /
</pre></td></tr>
</table>

        <p>
        Mit <font class="input">N</font> gekennzeichnete Pakete sind noch nicht auf ihrem Rechner installiert, 
        würden aber durch die angegebene Aktion eingespielt werden.
        Pakete, die mit einem <font class="input">U</font>
	gekennzeichnet sind, befinden sich bereits installiert auf
	Ihrem System (wobei es sich höchstwahrscheinlich um veraltete
	Pakete handelt) und werden durch diese Aktion aktualisiert.
	</p>
	<p>
	Folgende Parameter sind ausserdem Verfügbar:
	</p>
	<p>
	<font class="input">--fetchonly</font> : Läd alle benötigten Dateien herunter, die
	für das Kompilieren notwendig sind, sowie alle Abhängigkeiten,
	die dadurch entstehen.
	</p>
	<p>
	<font class="input">--emptytree</font> : Diese Option lässt Portage vortäuschen,
	dass keine der Abhängigkeiten oder Pakete auf denen das zu installierende
        Paket beruht installiert sind.

	Dies lässt sich sehr gut Option <font class="input">--pretend</font> verbinden, um eine komplette
	Liste der Abhängigkeiten für jedes einzelne Paket anzeigen
	zu lassen. Alle Abhängigkeiten mit Ausnahme von Glibc werden dargestellt.
	</p>

	<p>
<font class="input">--nodeps</font> : Mit dieser Option versucht Portage nur die angegebene Pakete
        zu &quot;mergen&quot; und ignoriert sämtliche Abhängigkeiten. Bitte beachten Sie,
        dass diese Option zu Problemen führen kann, wenn Sie die Pakete, von welche
        das jeweilige Paket abhängig ist, nicht bereits installiert haben.
        </p>
	<p>
<font class="input">--onlydeps</font> : Mit dieser Option ist es möglich, nur die Abhängigkeiten
        des jeweiligen Paketes zu &quot;mergen&quot;, jedoch nicht das ausgewählte Paket selbst.
        </p>
	<p>
<font class="input">--noreplace</font> : Wenn Sie Pakete zum &quot;mergen&quot; angeben, die bereits installiert
        sind, Sie jene aber nicht durch neue ersetzen wollen, hilft Ihnen diese Option weiter.
	</p>
	<p>
<font class="input">--usepkg</font> : Anstatt das angegebene Paket zu kompilieren, versucht Portage
        mit dieser Option ein vorkompiliertes tbz2 Paket von einem angegebenen Platz zu 
        installieren . Jener Platz ist in der PKGDIR Shellumgebungsvariable anzugeben.
        </p>
	<p>
<font class="input">--debug</font> : Um eine noch detailiertere Ausgabe zu bekommen, was während
        der Aktion mit Portage passiert, benutzen Sie diese Option. Normalerweise werden Ausgaben
        &quot;menschlich lesbarer&quot; dargestellt. So haben Sie zum Beispiel als Entwickler die
        Möglichkeit, syntaktische Fehler in Bash Script basierten ebuild Dateien zu
        erruieren.
	</p>
	<p>
<font class="input">--autoclean</font> : Zwingt <font class="input">emerge</font> zum totalen Bereinigen von
        spezifischen Temporärverzeichnissen für Kompiliervorgänge, bevor das
        Paket kompiliert wird. Portage erledigt dies bei standard Konfiguration von
        selbst, dadurch ist diese Option nur für Entwickler interessant, die dieses
        Verhalten abgeschaltet haben.
	</p>
	<p>
<font class="input">--verbose</font> : Sagt <font class="input">emerge</font>, dass es im ausführlichen Modus
        laufen soll. Derzeit verursacht diese Option nur GNU Info Fehler-Meldungen.
        Diese können jedoch von Benutzer ohne Weiteres ignoriert werden.
	</p>
<p class="secthead"><a name="_sect3">&quot;Unmergen&quot; (Deinstallieren) von Paketen </a></p>
	<p> Der Vorgang des &quot;unmergens&quot; ist, das die Dateien, die mit einem
        installierten Paket verbunden sind, gelöscht werden. Damit ist
        die Software vom System entfernt und kann nicht mehr benutzt werden,
        bis Sie jenes Paket wieder &quot;mergen&quot;.
	</p>
	<p>Pakete werden mittels des <font class="input">emerge</font> Befehls und dem Parameter
        <font class="input">unmerge</font>, gefolgt vom Namen des Paketes entfernt. Das folgende
        Beispiel beseitigt alle installierten Versionen vom <font class="input">ltrace</font>
        Paket.
	</p>

<a name="doc_pre16"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 16</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
emerge unmerge ltrace

oder

emerge unmerge dev-util/ltrace
</pre></td></tr>
</table>
	<p>Portage erlaubt ausserdem das &quot;unmergen&quot; von ganz spezifischen
        Versionen eines Paketes. Reguläre Ausdrücke werden durch
        <font class="input">=</font> (exakte version), <font class="input">&lt;</font> (kleiner als), <font class="input">&gt;</font>
        (grösser als), <font class="input">&lt;=</font>(kleiner als oder gleich), und
        <font class="input">&gt;=</font> (grösser als oder gleich) dargestellt.
        Das folgende Beispiel würde alle Versionen, die gleich und älter
        des Paketes ltrace in der Version 0.3.15 sind, &quot;unmergen&quot;.
	</p>

<a name="doc_pre17"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 17</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
emerge unmerge \&lt;=dev-utils/ltrace-0.3.15
</pre></td></tr>
</table>

	<p>Wenn Sie reguläre Ausdrücke für Pakete
        benutzen, so stellen Sie sicher, das Sie jeweils für die
        Zeichen <font class="input">&gt;</font> und <font class="input">&lt;</font> ein Backslash davorsetzen,
        so das Ihre Shell in diesem Fall dies nicht falsch interpretiert.
        Ausserdem ist es von Nöten, die Kategorie des Paketes,
        wie im Beispiel gezeigt, anzugeben. Für andere reguläre
        Ausdrucksbeispiele, führen Sie den Befehl <font class="input">emerge --help</font>
        aus.
	</p>

	<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#ffbbbb"><p class="note">
<b>Warnung: </b>Das &quot;unmergen&quot; von Paketen kann gefährlich sein.
        Wenn Sie ein Paket des Grundsystems entfernen, verliert Ihr
        System an Funktionalität und bei entfernten Bibliotheken
        droht funktionsuntüchtige Software.
        
	<b>Portage warnt Sie nicht, wenn Sie Pakete des Grundsystems
        oder gar Abhängigkeiten anderer Pakete entfernen.</b>
	</p></td></tr></table>

	<p>Wenn das zu entfernende Paket tatsächlich installiert
        ist, wird das Programm emerge exakt anzeigen, welche Pakete
        entfernt werden und wartet eine gewisse Anzahl an Sekunden ab,
        um den Benutzer die Möglichkeit zu geben, den Vorgang
        mittels der Tastenkombination Control-C abbzubrechen.
	</p>
	<p>
        Beginnt erstmal der Vorgang des &quot;unmergens&quot;, sehen Sie eine
        lange Liste von Dateinamen, die mit dem Paket verbunden sind.
        Manche dieser Dateinamen haben ein Merkmal (flag), das an
        der linken Seite der Datei angezeigt wird. Die Merkmale
        <font class="input">!mtime</font>, <font class="input">!empty</font>, und <font class="input">cfg</font> verdeutlichen,
        weshalb einige Dateien nicht entfernt worden sind, als das
        Paket &quot;unmerged&quot; wurde.

        Dateien ohne jegliche Merkmale wurden erfolgreich vom System
        entfernt.
	</p>
	<p>Das Merkmal <font class="input">!mtime</font> sagt aus, dass die Datei geändert
        worden ist, nachdem das Paket installiert wurde. Das bedeutet, dass
        jemand nach dem &quot;mergen&quot; des Paketes diese Datei bearbeitet hat oder
        zu einem späteren Zeitpunkt andere Pakete es überschrieben haben. 
        Dies erlaubt es, dass Pakete aktualisiert werden können, 
        ohne die Gefahr, dass wichtige Dateien entfernt werden.
	</p>
	<p>Das Merkmal <font class="input">!empty</font> weist auf Verzeichnisse hin, welches
        Portage verbietet, diese zu entfernen, da sie nicht leer sind
        (Mehrere Pakete teilen sich oft das selbe
        Verzeichniss, welches das Paket, was &quot;unmerged&quot; wird, entweder
        selbst angehört oder ebenfalls benutzt).

        Der Konfigurationsdatei Schutz-Mechanismus tritt dann ein, wenn
        Sie das <font class="input">cfg</font> Merkmal sehen. Das bedeutet, ein neueres
        Paket, was installiert werden wörde, übernimmt den Besitz
        jener Konfigurationsdateien und Portage verweigert die Entfernung
        dieser Dateien.
	</p>
	<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#ffbbbb"><p class="note">
<b>Warnung: </b>
        Dateien werden immer dem letzten installierten Paket zugeordnet.
        Dies ist abhängig von der Reihenfolge der Installation und
        unabhängig von der aktuellen Versions- oder Revisionsnummer
        der Pakete, die installiert sind. Wenn ein Paket eine Datei besitzt, 
        wird diese immer mit deinstalliert, auch wenn eine ältere Version eines 
        Paketes diese Datei installiert hat, solange der Nutzer diese Datei 
        nicht manuell geändert hat.
        </p></td></tr></table>

<p class="secthead"><a name="_sect4">System Update </a></p>
<p>
Portage unterstützt die Möglichkeit, alle installierten Pakete mit einem einzigen Befehl zu aktualisieren. Das System-Update-Feature ermöglicht es ihnen, die Kernpakete ihres Systems zu Versionen zu aktualisieren, die von den Gentoo-Entwicklern empfohlen werden und zum einwandfreien Betrieb von Gentoo Linux notwendig sind. Ein System-Update aktualisiert keine Pakete, die nicht als essenziell angesehen werden. Nur die Pakete, die im Portage Profil angegeben sind, werden als absolut wichtig für den Betrieb und die Aufrechterhaltung des Systems erachtet
</p>
<p>
Um ein System-Update zu starten, geben sie den folgenden Befehl ein:
</p>
<a name="doc_pre18"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 18</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
emerge --update system
</pre></td></tr>
</table>
<p>
Portage wird nun, abhängig von den Versionen und Paketen, welche sie derzeit installiert haben, die Updates übersetzen und installieren, die vom aktuellen Portage-Profil empfohlen werden. Sie haben die Möglichkeit sich mit der Option <font class="input">--pretend</font> eine Liste mit den Paketen die installiert bzw. aktualisiert werden, ausgeben zu lassen, wenn das oben gezeigte Beispiel ausgeführt würde.
</p>
<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#bbffbb"><p class="note">
<b>Anmerkung: </b>
Wie sie aus der Gentoo-Installationsanleitung erfahren können, ist einer der ersten Schritte der Befehl <font class="input">emerge system</font>, um das Grundsystem zu installieren. Mit <font class="input">emerge --update system</font> werden diese Basispakete auf den aktuellsten Stand gebracht.
</p></td></tr></table>
<p class="secthead"><a name="_sect5">World Update </a></p>
<p>
Portage unterstützt außerdem die Möglichkeit, alle nicht-essenziellen Pakete mit einem einzigen Befehl zu aktualisieren. Das Portage-System besitzt dafür einen gewissen Grad an &quot;Intelligenz&quot;, die es ermöglicht, ein System mit verschiedene Versionen von Paketen, die in Konflikt zueinander stehen, sicher zu aktualisieren .
</p>
<p>
Das world-update-Feature von Portage überprüft das Systemprofil, die Liste der blockierten Pakete (<font class="input">package.mask</font>), das world-Profil und die Abhängigkeiten (inkl. Versionkontrolle) von Paketen die im world-Profil stehen. Dadurch findet es heraus, welche Pakete aktualisiert werden müssen. Ein Paket wird nur aktualisiert, wenn es eine neue Version gibt und das Paket im world-Profil aufgeführt wird oder ein anderes Paket, das im world-Profil steht von ihm abhängt. Selbstverständlich darf das Paket oder eine spezielle Version dessen nicht durch das Systemprofil oder die <font class="input">package.mask</font> blockiert sein.
</p>

	<p>When considering which packages to upgrade, Portage tries to 
	upgrade all packages mentioned in the world profile to the newest
	unblocked version available.Portage also considers the dependencies
	of each package mentioned in the world profile and will try to
	upgrade the dependency to a newer version if one is available, matches
	the version ranges specified, and is not blocked by either the system
	profile or <font class="input">package.mask</font>.  It also takes into consideration
	<font class="input">SLOTS</font> as mentioned in a previous chapter.
	</p>

	<p>Users familiar with other distributions and packaging methods
	besides Portage may be confused by why Portage does not simply
	do a blind upgrade of packages based solely on version numbers (as it
	did before Gentoo 1.0).  Many of the packages included in Gentoo's
	Portage Tree have many versions available.  An older or newer
	version of a package may be incompatible with the software that relies
	on it.  Blindly upgrading libraries and tools without taking into
	consideration the needs of other packages can quickly result in
	many severe problems.  To avoid this Portage tries to take care when
	upgrading and takes the needs of all packages into consideration based
	on the needs declared in individual package ebuilds.
	</p>
	
	<p>
	The heart of Portage's world update is the world profile.  Unlike
	the system profile which is usually defined by developers and never
	touched by users, the world update profile is generated indirectly
	over time by actions performed by the user.
	The world profile operates much like a &quot;favorites list&quot;.
	Packages that are manually installed by the user through use of the
	<font class="input">emerge</font> command are recorded in the <font class="input">world</font> file located at
	<font class="input">/var/cache/edb/world</font>.  Portage assumes that because you took
	the effort to tell it to install the package then you must have some
	interest in keeping it up to date.
	</p>
	<p>
	The <font class="input">world</font> file consists of one package name with category per
	line and may look something like the following:
	</p>
<a name="doc_pre19"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 19</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
net-im/gaim
net-www/skipstone
net-www/galeon
app-editors/vim
app-text/ispell
net-mail/evolution
dev-util/ltrace
sys-apps/xfsprogs
=net-www/mozilla-0.9.8-r3
sys-apps/attr
sys-apps/dmapi
sys-kernel/linux-sources
sys-apps/acl
app-office/gnucash
app-cdr/xcdroast
</pre></td></tr>
</table>
	<p>
	Almost all of the entries in this example file were added 
	automatically by Portage when the user manually merged the specific 
	packages.  These packages will be upgrade if a newer version is 
	available.
	</p>
	
	<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#bbffbb"><p class="note">
<b>Anmerkung: </b>To save time and make sure your favorite packages are kept updated
	you may manually edit the <font class="input">world</font> file and add entries for these
	packages.  Users upgrading from old versions of Portage may need
	to populate this file.  Recent installations of Gentoo and Portage
	should have a fairly populated world profile created during
	installation.</p></td></tr></table>
	
	<p>An interesting entry to note is the entry for the mozilla package
	(<font class="input">=net-www/mozilla-0.9.8-r3</font>).  This entry was added manually
	by a user to &quot;pin&quot; a specific version.  Package ranges (as discussed
	in the <font class="input">Unmerge Packages</font> section of this manual) can be used
	to force Portage to only consider certain version ranges when 
	updating packages.  This entry in effect &quot;pins&quot; Portage into 
	considering mozilla-0.9.8-r3 to be the only available version and 
	thus it will never attempt to update the package during a world
	update for any reason.
	</p>
	
	<p>World updates are done using the following command:</p>
<a name="doc_pre20"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 20</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
emerge --update world
</pre></td></tr>
</table>
	<p>Portage will then attempt to update all packages mentioned in
	the <font class="input">world</font> file and will update any dependencies if needed.
	Dependencies are upgraded to the newest version available that
	satisfies the needs of the package being upgraded.  Packages
	that are not listed in <font class="input">world</font> and are not dependencies of
	the aforementioned packages are not updated.
	</p>

	<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#ffbbbb"><p class="note">
<b>Warnung: </b>Portage will not overwrite files in directories protected
	by Configuration File Protection.  You will need to manually
	merge the differences between your current configuration files
	and the new versions Portage saved for you.  If you do not
	update your configuration files installed software may stop 
	functioning.  Please see <font class="input">Configuration File Protection</font> 
	in the <font class="input">Configuring Portage</font> chapter or use the command 
	<font class="input">emerge --help config</font> for more information. </p></td></tr></table> 

	<p>To view a list of what would be updated or installed during 
	a world update, you can use the <font class="input">--pretend</font> argument as 
	mentioned in previous sections of this chapter.
	</p>

	<table class="ncontent" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td bgcolor="#bbffbb"><p class="note">
<b>Anmerkung: </b>A world update also performs a system update automatically.  
	Core packages cannot be pinned using the <font class="input">world</font> file method as 
	the current Portage profile will always override it.</p></td></tr></table>

	<p>
	An interesting side effect of how world update works can
	be exploited by users wishing to recompile all installed software
	on a system.  Since world update will try to update all packages
	mentioned in the <font class="input">world</font> file and their dependencies, the use
	of the argument <font class="input">--emptytree</font> is a way of forcing the recompile
	of these packages and every dependency except for glibc.
	This can be useful for users wishing to change their compiler options
	or USE keyword settings and want these changes to be used by all
	the software they use without manually remerging every package.
	Simply populate the <font class="input">world</font> file with all your commonly used
	applications and issue the following command: 
	</p>
<a name="doc_pre21"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 21</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
emerge --update world --emptytree
</pre></td></tr>
</table>
	<p>
	You can add the <font class="input">--pretend</font> argument to this command to get a 
	list of packages that would be recompiled as a result of this action.
	</p>
	
<p class="secthead"><a name="_sect6">Cleaning System </a></p>
	<p>Portage supports the ability to install multiple versions
	of the same version on top of each other.  There are quite a few
	packages in Gentoo's Portage Tree that makes use of this
	functionality (for backwards compatibility as older applications may
	be incompatible with a newer version of another package)
	</p>
	<p>In most cases though when a newer version of a package is installed
	most of the older package is overwritten and all that remains is
	a few documentation files and other files unimportant to the operation
	of a system.  Overtime this &quot;cruft&quot; can build up and waste valuable
	disk-space.
	</p>
	<p>To combat this, Portage provides an easy way to remove traces
	of older versions from a user's system.  This functionality is referred
	to as the emerge <font class="input">clean</font> option and be used by issuing the
	following command:
	</p>
<a name="doc_pre22"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 22</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
emerge clean
</pre></td></tr>
</table>
	<p>
<font class="input">emerge</font> will then display a list of package revisions and 
	versions to be removed, the versions that will remain, and give
	the user time to cancel out of the action by pressing Control-C.
	On a typical system a flurry of activity will occur as it displays
	long lists of files that were either deleted or kept.
	</p>

	<p>Unless specified, Portage assumes the clean action is to be
	performed for the <font class="input">world</font> (all installed packages).  You can
	narrow the scope of the clean action by using options such as 
	<font class="input">world</font>, <font class="input">system</font>, a list of package names, and package 
	version ranges as mentioned in the unmerge section of this chapter.
	</p>

	<p>When considering which package versions should be removed the 
	Portage system considers the various profiles, the needs of other
	installed packages, and a packages SLOT.  Assuming dependencies
	are correctly defined for all packages, the clean action will
	safely remove old package system and should not remove any
	functionality or prevent the system from functioning.
	</p>	
<p class="secthead"><a name="_sect7">Pruning Packages </a></p>
	<p>
	Portage also supports a package <font class="input">prune</font> action.   The prune
	action is an unsafe form of the clean.  It removes all versions
	of all packages except for the last installed version.  It does
	not perform many of the checks <font class="input">clean</font> performs and can
	remove essential dependencies from your system.  Users of this 
	option can easily break their systems and its use is not recommended
	except in specific specialized circumstances.
	</p>

	<p>The <font class="input">prune</font> action accepts the same list as options as the
	<font class="input">clean</font> action and can be used like the following:
	</p>
<a name="doc_pre23"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 23</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
emerge prune
</pre></td></tr>
</table>
<p class="secthead"><a name="_sect8">Searching The Portage Tree </a></p>
	<p>Portage Trees such as the one that forms the heart of the Gentoo
	Linux distribution can be quite large.  The <font class="input">emerge</font> command
	provides a search feature which accepts a search string in the form
	of a regular expression contained in quotes.  Regular expressions
	are very complicated beasts so it is recommended you find a good book
	on the topic if you are interested in fully using regular expressions.
	</p>
	<p>
	Most simple searches can be done without knowing how to form
	regular expressions.  The following is an example of a simple search 
	for a package either named &quot;gcc&quot; or has &quot;gcc&quot; as part of its name:
	</p>
<a name="doc_pre24"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 24</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
emerge search gcc
</pre></td></tr>
</table>
	<p>
	For each match the search action lists the package name, newest 
	available version, newest version installed, its home page, and
	a description of the software contained in the package.
	</p>
<p class="secthead"><a name="_sect9">Getting Help </a></p>
	<p>More information on the many options and actions <font class="input">emerge</font>
	supports can be found by issuing the following command:</p>
<a name="doc_pre25"></a><table class="ntable" width="100%" cellspacing="0" cellpadding="0" border="0">
<tr><td class="infohead" bgcolor="#7a5ada"><p class="caption">
			Beispiel 25</p></td></tr>
<tr><td bgcolor="#ddddff"><pre>
emerge --help
</pre></td></tr>
</table>
<p class="secthead"><a name="_sect10">Useful Utilities </a></p>
	<p>Several utilities have been made available by Gentoo users
	to make life easier.  These utilities are available in the
	<font class="input">app-admin/gentoolkit</font> in the Gentoo Portage tree.
	</p>
	<p>
	<ul>
	<li>
<font class="input">etc-update</font> : shell script using vim to assist with the
	merging of /etc files (can be dangerous if used incorrectly)</li>
	<li>
<font class="input">qpkg</font> : package database query tool</li>
	<li>
<font class="input">epm</font> : another package database query tool with RPM like syntax</li>
	</ul>
	</p>
<br><br>
</td>
<td width="1%" bgcolor="#dddaec" valign="top"><table border="0" cellspacing="5" cellpadding="0">
<tr><td><img src="http://www.ibiblio.org/gentoo/images/line.gif"></td></tr>
<tr><td align="center" class="alttext">
						letzte Änderung 18.Juli 2002</td></tr>
<tr><td><img src="http://www.ibiblio.org/gentoo/images/line.gif"></td></tr>
<tr><td class="alttext">
<b><a class="altlink" href="mailto:blocke@shivan.org">Bruce A. Locke</a></b>
<br><i>Author and Editor</i><br><br>
<b><a class="altlink" href="mailto:sebastian@beneke-it.de">Sebastian Beneke</a></b>
<br><i>Übersetzung</i><br><br>
<b><a class="altlink" href="mailto:jazz_rabbit@berlios.de">Erwin Hengl</a></b>
<br><i>Übersetzung</i><br><br>
<b><a class="altlink" href="mailto:kontakt@hendrik-brandt.de">Hendrik Brandt</a></b>
<br><i>Übersetzung</i><br><br>
</td></tr>
<tr><td><img src="http://www.ibiblio.org/gentoo/images/line.gif"></td></tr>
<tr><td class="alttext">
<b>Zusammenfassung:</b> 
Dieses Handbuch liefert einen generellen Überblick über Portage,
detaillierte Informationen sowie eine Anleitung zur Installation und
Pflege von Paketen des Portage Systems.
</td></tr>
<tr><td><img src="http://www.ibiblio.org/gentoo/images/line.gif"></td></tr>
</table></td>
</tr></table></td></tr>
<tr><td align="right" class="infohead" width="100%" bgcolor="#7a5ada">
			Fragen, Kommentare, Korretkuren?  Email <a class="highlight" href="mailto:gentoo-deutsch-dev@lists.berlios.de">gentoo-deutsch-dev@lists.berlios.de</a>.
			</td></tr>
</table></body>
</html>
